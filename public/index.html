<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üåø Herb On Naturals - Order Management</title>

    <!-- DNS Prefetch for External Domains (Faster DNS Resolution) -->
    <link rel="dns-prefetch" href="https://apis.mappls.com">
    <link rel="dns-prefetch" href="https://cdn.tailwindcss.com">
    <link rel="dns-prefetch" href="https://cdnjs.cloudflare.com">
    <link rel="dns-prefetch" href="https://cdn.jsdelivr.net">
    <link rel="dns-prefetch" href="https://fonts.googleapis.com">

    <!-- Preload Critical Resources for Faster Loading -->
    <link rel="preload" href="app.js?v=3.6" as="script">
    <link rel="preload" href="styles.css" as="style">
    <link rel="preload" href="js/core/config.js" as="script">
    <link rel="preload" href="js/core/session.js" as="script">

    <!-- Critical: Tailwind CSS (needed for styling) -->
    <script src="https://cdn.tailwindcss.com" defer></script>

    <!-- Fonts (async loading) -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet"
        media="print" onload="this.media='all'">

    <!-- Non-Critical Heavy Libraries (async - load in parallel, execute when ready) -->
    <script src="https://apis.mappls.com/advancedmaps/v1/f4c410f517ad05591fbebd88cb3742fa/map_load?v=1.5"
        async></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js" async></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js" async></script>
    <script src="https://cdn.jsdelivr.net/npm/jsbarcode@3.11.5/dist/JsBarcode.all.min.js" async></script>

    <link rel="stylesheet" href="styles.css">


</head>

<body>
    <div id="app">
        <!-- ‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
             ‚ïë  üîê LOGIN SCREEN (Lines 20-177)                                                     ‚ïë
             ‚ï†‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï£
             ‚ïë  Contains: Employee Login, Department Login, Admin Login                          ‚ïë
             ‚ïë  Functions: employeeLogin(), departmentLogin(), adminLogin(), switchLoginTab()    ‚ïë
             ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù -->
        <div id="loginScreen" class="min-h-screen flex items-center justify-center relative overflow-hidden py-10 px-4">
            <!-- Decorative Background Elements -->
            <div class="absolute top-0 left-0 w-full h-full overflow-hidden z-0 pointer-events-none">
                <div
                    class="absolute top-[-10%] left-[-10%] w-64 h-64 md:w-96 md:h-96 bg-blue-300 rounded-full mix-blend-multiply filter blur-3xl opacity-25 animate-blob">
                </div>
                <div
                    class="absolute top-[-10%] right-[-10%] w-64 h-64 md:w-96 md:h-96 bg-indigo-300 rounded-full mix-blend-multiply filter blur-3xl opacity-25 animate-blob animation-delay-2000">
                </div>
                <div
                    class="absolute -bottom-32 left-20 w-64 h-64 md:w-96 md:h-96 bg-sky-300 rounded-full mix-blend-multiply filter blur-3xl opacity-25 animate-blob animation-delay-4000">
                </div>
            </div>

            <!-- Main Card -->
            <div class="relative z-10 w-full max-w-md animate-fadeIn">
                <div class="glass-card p-6 md:p-10 shadow-2xl border border-white/50 backdrop-blur-xl bg-white/40">
                    <!-- Header -->
                    <div class="text-center mb-8">
                        <div class="w-full max-w-sm mx-auto mb-6 mt-6 flex items-center justify-center px-4 relative">
                            <!-- Animated Gradient Border -->
                            <div
                                class="absolute inset-0 bg-gradient-to-r from-blue-300 via-indigo-300 to-sky-300 rounded-3xl blur-xl opacity-50 animate-pulse">
                            </div>
                            <div class="relative bg-white rounded-3xl p-6 shadow-2xl logo-float overflow-hidden">
                                <img src="logo.png" alt="Herb On Naturals"
                                    class="w-full h-auto object-contain drop-shadow-2xl relative z-10">
                                <!-- Gradient Overlay on Logo -->
                                <div
                                    class="absolute inset-0 bg-gradient-to-br from-blue-300/20 via-indigo-300/15 to-sky-300/20 mix-blend-overlay pointer-events-none z-20">
                                </div>
                                <!-- Animated Light Sweep -->
                                <div
                                    class="absolute inset-0 bg-gradient-to-r from-transparent via-white/40 to-transparent -translate-x-full animate-shimmer pointer-events-none z-30">
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="loginMessage" class="hidden mb-6 p-4 rounded-xl text-sm text-center shadow-sm"></div>

                    <!-- Modern Tabs -->
                    <div class="flex p-1.5 bg-gray-100/80 rounded-2xl mb-8 relative shadow-inner">
                        <button type="button" onclick="switchLoginTab('employee')" id="loginTabEmployee"
                            class="flex-1 py-2.5 rounded-xl text-sm font-bold transition-all duration-300 shadow-sm tab-active z-10">
                            üë§ Emp
                        </button>
                        <button type="button" onclick="switchLoginTab('department')" id="loginTabDept"
                            class="flex-1 py-2.5 rounded-xl text-sm font-bold text-gray-500 hover:text-gray-700 transition-all duration-300 z-10">
                            üè¢ Dept
                        </button>
                        <button type="button" onclick="switchLoginTab('admin')" id="loginTabAdmin"
                            class="flex-1 py-2.5 rounded-xl text-sm font-bold text-gray-500 hover:text-gray-700 transition-all duration-300 z-10">
                            ‚öôÔ∏è Admin
                        </button>
                    </div>

                    <!-- Employee Login Form -->
                    <div id="employeeLoginForm" class="space-y-5">
                        <div class="relative group">
                            <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                                <span class="text-gray-400 group-focus-within:text-blue-500 transition-colors">üÜî</span>
                            </div>
                            <input type="text" id="empLoginId" placeholder="Employee ID"
                                class="w-full pl-11 pr-4 py-3.5 bg-white/60 border border-gray-200 rounded-xl focus:ring-2 focus:ring-emerald-400 focus:border-blue-400 outline-none transition-all placeholder-gray-400 font-medium">
                        </div>
                        <div class="relative group">
                            <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                                <span class="text-gray-400 group-focus-within:text-blue-500 transition-colors">üîí</span>
                            </div>
                            <input type="password" id="empLoginPass" placeholder="Password"
                                class="w-full pl-11 pr-12 py-3.5 bg-white/60 border border-gray-200 rounded-xl focus:ring-2 focus:ring-emerald-400 focus:border-blue-400 outline-none transition-all placeholder-gray-400 font-medium">
                            <button type="button" onclick="togglePassword('empLoginPass', this)"
                                class="absolute inset-y-0 right-0 pr-4 flex items-center text-gray-400 hover:text-gray-600 transition-colors">
                                <span class="text-lg">üëÅÔ∏è</span>
                            </button>
                        </div>

                        <button type="button" onclick="employeeLogin()"
                            class="w-full bg-gradient-to-r from-emerald-500 to-teal-500 text-white py-4 rounded-xl font-bold text-lg shadow-lg hover:shadow-xl hover:-translate-y-1 transition-all duration-300">
                            Sign In
                        </button>

                        <div class="flex gap-3 pt-2">
                            <button type="button" onclick="showRegisterScreen()"
                                class="flex-1 bg-white border border-gray-200 text-gray-600 py-2.5 rounded-xl text-sm font-semibold hover:bg-gray-50 transition-colors flex items-center justify-center gap-2">
                                ‚ú® New Account
                            </button>
                            <button type="button" onclick="showResetScreen()"
                                class="flex-1 bg-white border border-gray-200 text-gray-600 py-2.5 rounded-xl text-sm font-semibold hover:bg-gray-50 transition-colors flex items-center justify-center gap-2">
                                üîë Forgot Pass
                            </button>
                        </div>
                    </div>

                    <!-- Department Login Form -->
                    <div id="departmentLoginForm" class="hidden space-y-5">
                        <div class="flex gap-3 mb-2 p-1 bg-gray-50 rounded-xl">
                            <button type="button" onclick="setDeptType('verification')" id="deptTypeVerify"
                                class="flex-1 py-2.5 rounded-lg text-sm font-bold bg-white text-blue-600 shadow-sm border border-blue-100 transition-all">
                                üìç Verify
                            </button>
                            <button type="button" onclick="setDeptType('dispatch')" id="deptTypeDispatch"
                                class="flex-1 py-2.5 rounded-lg text-sm font-bold text-gray-500 hover:bg-white/50 transition-all">
                                üì¶ Dispatch
                            </button>
                            <button type="button" onclick="setDeptType('delivery')" id="deptTypeDelivery"
                                class="flex-1 py-2.5 rounded-lg text-sm font-bold text-gray-500 hover:bg-white/50 transition-all">
                                üöö Delivery
                            </button>
                        </div>

                        <div class="relative group">
                            <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                                <span class="text-gray-400 group-focus-within:text-blue-500 transition-colors">üè¢</span>
                            </div>
                            <input type="text" id="deptLoginId" placeholder="Department ID"
                                class="w-full pl-11 pr-4 py-3.5 bg-white/60 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-400 focus:border-blue-400 outline-none transition-all placeholder-gray-400 font-medium">
                        </div>
                        <div class="relative group">
                            <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                                <span class="text-gray-400 group-focus-within:text-blue-500 transition-colors">üîí</span>
                            </div>
                            <input type="password" id="deptLoginPass" placeholder="Department Password"
                                class="w-full pl-11 pr-12 py-3.5 bg-white/60 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-400 focus:border-blue-400 outline-none transition-all placeholder-gray-400 font-medium">
                            <button type="button" onclick="togglePassword('deptLoginPass', this)"
                                class="absolute inset-y-0 right-0 pr-4 flex items-center text-gray-400 hover:text-gray-600 transition-colors">
                                <span class="text-lg">üëÅÔ∏è</span>
                            </button>
                        </div>

                        <button type="button" onclick="departmentLogin()"
                            class="w-full bg-gradient-to-r from-blue-600 to-indigo-600 text-white py-4 rounded-xl font-bold text-lg shadow-lg hover:shadow-xl hover:-translate-y-1 transition-all duration-300">
                            Login to Panel
                        </button>
                    </div>

                    <!-- Admin Login Form -->
                    <div id="adminLoginForm" class="hidden space-y-5">
                        <div class="p-4 bg-gray-50 rounded-xl border border-gray-100 text-center mb-2">
                            <span class="text-3xl">üõ°Ô∏è</span>
                            <p class="text-xs text-gray-500 mt-2 font-medium uppercase tracking-wider">Restricted Access
                            </p>
                        </div>

                        <div class="relative group">
                            <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                                <span class="text-gray-400 group-focus-within:text-gray-800 transition-colors">üîë</span>
                            </div>
                            <input type="password" id="adminLoginPass" placeholder="Admin Access Key"
                                class="w-full pl-11 pr-12 py-3.5 bg-white/60 border border-gray-200 rounded-xl focus:ring-2 focus:ring-gray-600 focus:border-gray-600 outline-none transition-all placeholder-gray-400 font-medium">
                            <button type="button" onclick="togglePassword('adminLoginPass', this)"
                                class="absolute inset-y-0 right-0 pr-4 flex items-center text-gray-400 hover:text-gray-600 transition-colors">
                                <span class="text-lg">üëÅÔ∏è</span>
                            </button>
                        </div>

                        <button type="button" onclick="adminLogin()"
                            class="w-full bg-gradient-to-r from-gray-700 to-gray-900 text-white py-4 rounded-xl font-bold text-lg shadow-lg hover:shadow-xl hover:-translate-y-1 transition-all duration-300">
                            Authenticate
                        </button>
                    </div>

                    <!-- Footer -->
                    <div class="mt-8 text-center">
                        <p class="text-xs text-gray-400 font-medium">¬© 2025 Herb On Naturals System</p>
                    </div>
                </div>
            </div>
        </div>
        <!-- ‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
             ‚ïë  üìù REGISTER SCREEN (Lines 179-192)                                                 ‚ïë
             ‚ï†‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï£
             ‚ïë  Contains: New Employee Registration Form                                          ‚ïë
             ‚ïë  Functions: registerEmployee(), showLoginScreen()                                  ‚ïë
             ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù -->
        <div id="registerScreen" class="hidden max-w-md mx-auto mt-10 glass-card p-8 animate-fadeIn">
            <h2 class="text-xl font-bold text-center mb-6">‚ú® New Employee Registration</h2>
            <div id="registerMessage" class="hidden mb-4 p-3 rounded-xl text-sm"></div>
            <div class="space-y-4"><input type="text" id="regName" placeholder="Full Name"
                    class="w-full border-2 rounded-xl px-4 py-3"><input type="text" id="regId"
                    placeholder="Employee ID (e.g., EMP005)" class="w-full border-2 rounded-xl px-4 py-3"><input
                    type="password" id="regPass" placeholder="Password"
                    class="w-full border-2 rounded-xl px-4 py-3"><input type="password" id="regConfirmPass"
                    placeholder="Confirm Password" class="w-full border-2 rounded-xl px-4 py-3"><button type="button"
                    onclick="registerEmployee()" class="w-full btn-primary text-white py-3 rounded-xl font-semibold">‚úÖ
                    Register</button><button type="button" onclick="showLoginScreen()"
                    class="w-full bg-gray-200 text-gray-700 py-3 rounded-xl font-medium">‚Üê Back to
                    Login</button></div>
        </div>
        <!-- ‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
             ‚ïë  üîë RESET PASSWORD SCREEN (Lines 194-206)                                           ‚ïë
             ‚ï†‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï£
             ‚ïë  Contains: Password Reset Form                                                     ‚ïë
             ‚ïë  Functions: resetPassword(), showLoginScreen()                                     ‚ïë
             ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù -->
        <div id="resetScreen" class="hidden max-w-md mx-auto mt-10 glass-card p-8 animate-fadeIn">
            <h2 class="text-xl font-bold text-center mb-6 text-red-500">üîë Reset Password</h2>
            <div id="resetMessage" class="hidden mb-4 p-3 rounded-xl text-sm"></div>
            <div class="space-y-4"><input type="text" id="resetId" placeholder="Employee ID"
                    class="w-full border-2 rounded-xl px-4 py-3"><input type="password" id="resetNewPass"
                    placeholder="New Password" class="w-full border-2 rounded-xl px-4 py-3"><input type="password"
                    id="resetConfirmPass" placeholder="Confirm New Password"
                    class="w-full border-2 rounded-xl px-4 py-3"><button type="button" onclick="resetPassword()"
                    class="w-full bg-red-600 text-white py-3 rounded-xl font-semibold hover:bg-red-700">üîÑ
                    Reset Password</button><button type="button" onclick="showLoginScreen()"
                    class="w-full bg-gray-200 text-gray-700 py-3 rounded-xl font-medium">‚Üê Back to
                    Login</button></div>
        </div>
        <!-- ‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
             ‚ïë  üë§ EMPLOYEE PANEL (Lines 208-950)                                                   ‚ïë
             ‚ï†‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï£
             ‚ïë  Contains: New Order Form, My Orders, History, Cancelled, Progress                ‚ïë
             ‚ïë  Functions: switchEmpTab(), saveOrder(), loadMyOrders(), loadMyHistory()          ‚ïë
             ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù -->
        <div id="employeePanel" class="hidden animate-fadeIn font-['Poppins']">
            <div class="flex min-h-screen bg-gradient-to-br from-emerald-50 via-blue-50 to-purple-50 relative">

                <!-- EMPLOYEE SIDEBAR BACKDROP (Mobile) -->
                <div id="empSidebarBackdrop" onclick="toggleEmpSidebar()"
                    class="fixed inset-0 bg-slate-900/40 backdrop-blur-sm z-50 opacity-0 pointer-events-none backdrop-fade lg:hidden">
                </div>

                <!-- EMPLOYEE SIDEBAR -->
                <aside id="empSidebar"
                    class="w-64 bg-white border-r border-slate-200 fixed inset-y-0 left-0 z-[60] transform -translate-x-full lg:translate-x-0 sidebar-bouncy shadow-2xl lg:shadow-none flex flex-col h-[100dvh] overflow-hidden">

                    <!-- Logo Header -->
                    <div
                        class="flex-none p-5 border-b border-slate-100 bg-gradient-to-r from-emerald-50 to-teal-50 relative">
                        <div class="flex items-center gap-3">
                            <div
                                class="w-11 h-11 bg-gradient-to-br from-emerald-500 to-teal-500 rounded-xl flex items-center justify-center p-1.5 shadow-lg shadow-emerald-200">
                                <img src="icon.png" alt="HON" class="w-full h-full object-contain">
                            </div>
                            <div>
                                <h1 class="text-lg font-black tracking-tight text-slate-800">Herb On Naturals</h1>
                                <p class="text-[10px] text-emerald-600 font-semibold -mt-0.5" id="empSidebarSubtitle">
                                    Employee Panel</p>
                            </div>
                        </div>
                    </div>

                    <!-- Sidebar Navigation -->
                    <nav class="flex-1 py-4 overflow-y-auto">
                        <div class="px-3 space-y-1">
                            <button onclick="switchEmpTab('order')" id="empSidebarOrder"
                                class="sidebar-nav-item w-full flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm font-medium text-slate-600 hover:bg-emerald-50 hover:text-emerald-600 transition-all sidebar-active">
                                <span class="text-lg">üìù</span>
                                <span class="flex-1 text-left">New Order</span>
                            </button>
                            <button onclick="switchEmpTab('tracking')" id="empSidebarTracking"
                                class="sidebar-nav-item w-full flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm font-medium text-slate-600 hover:bg-emerald-50 hover:text-emerald-600 transition-all">
                                <span class="text-lg">üì¶</span>
                                <span class="flex-1 text-left">My Orders</span>
                            </button>
                            <button onclick="switchEmpTab('history')" id="empSidebarHistory"
                                class="sidebar-nav-item w-full flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm font-medium text-slate-600 hover:bg-emerald-50 hover:text-emerald-600 transition-all">
                                <span class="text-lg">üìã</span>
                                <span class="flex-1 text-left">History</span>
                            </button>
                            <button onclick="switchEmpTab('progress')" id="empSidebarProgress"
                                class="sidebar-nav-item w-full flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm font-medium text-slate-600 hover:bg-emerald-50 hover:text-emerald-600 transition-all">
                                <span class="text-lg">üìä</span>
                                <span class="flex-1 text-left">Progress</span>
                            </button>
                            <button onclick="switchEmpTab('ofd')" id="empSidebarOfd"
                                class="sidebar-nav-item w-full flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm font-medium text-slate-600 hover:bg-emerald-50 hover:text-emerald-600 transition-all">
                                <span class="text-lg">üöö</span>
                                <span class="flex-1 text-left">OFD</span>
                            </button>
                            <button onclick="switchEmpTab('cancelled')" id="empSidebarCancelled"
                                class="sidebar-nav-item w-full flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm font-medium text-slate-600 hover:bg-emerald-50 hover:text-emerald-600 transition-all">
                                <span class="text-lg">‚ùå</span>
                                <span class="flex-1 text-left">Cancelled</span>
                            </button>
                        </div>
                    </nav>

                    <!-- Sidebar Footer -->
                    <div class="flex-none p-4 border-t border-slate-100 bg-white">
                        <button onclick="showGlobalSearchBar()"
                            class="w-full h-10 flex items-center justify-center gap-2 bg-gradient-to-r from-blue-500 to-indigo-600 text-white rounded-xl text-xs font-bold hover:shadow-lg transition-all mb-2">
                            <span>üîç</span> SEARCH ORDER
                        </button>
                        <button onclick="logout()"
                            class="w-full h-10 flex items-center justify-center gap-2 bg-gradient-to-r from-red-500 to-rose-600 text-white rounded-xl text-xs font-bold hover:shadow-lg transition-all">
                            <span>üö™</span> SIGN OUT
                        </button>
                    </div>
                </aside>

                <!-- Main Content Area -->
                <main class="flex-1 lg:ml-64 overflow-x-hidden">

                    <!-- Top Bar (Mobile) -->
                    <div
                        class="lg:hidden sticky top-0 z-30 bg-white/95 backdrop-blur-md border-b border-slate-200 px-4 py-2.5 flex items-center justify-between shadow-sm">
                        <button onclick="toggleEmpSidebar()"
                            class="text-slate-600 hover:text-slate-900 bg-slate-50 p-1.5 rounded-lg transition-all">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M4 6h16M4 12h16M4 18h16"></path>
                            </svg>
                        </button>
                        <h1 class="text-sm font-black text-slate-800 uppercase tracking-widest">Employee Panel</h1>
                        <div class="w-8"></div>
                    </div>

                    <!-- Page Header -->
                    <div
                        class="sticky top-0 z-30 bg-white/95 backdrop-blur-md border-b border-slate-200 px-6 py-4 hidden lg:block shadow-sm">
                        <div class="flex items-center justify-between">
                            <div>
                                <h1 class="text-2xl font-black text-slate-800">Employee Dashboard</h1>
                                <p class="text-sm text-slate-500 font-medium">Welcome, <span id="empNameDisplay"
                                        class="font-bold text-emerald-600"></span></p>
                            </div>
                        </div>
                    </div>

                    <!-- Global Search Bar (Sticky) -->
                    <div class="sticky top-0 z-40 bg-white/95 backdrop-blur-md shadow-sm border-b border-gray-200 px-6 py-4 -mx-4 mb-6 hidden"
                        id="globalSearchBar">
                        <div class="max-w-2xl mx-auto">
                            <div class="relative">
                                <input type="text" id="globalSearchInput"
                                    placeholder="üîç Search order by Mobile, Order ID, or Customer Name..."
                                    class="w-full px-5 py-3 pr-32 border-2 border-blue-300 rounded-xl text-sm font-medium focus:border-blue-500 focus:ring-2 focus:ring-blue-200 outline-none transition-all"
                                    onkeypress="if(event.key==='Enter') globalSearchOrder(this.value)">
                                <div class="absolute right-2 top-1/2 -translate-y-1/2 flex gap-2">
                                    <button
                                        onclick="globalSearchOrder(document.getElementById('globalSearchInput').value)"
                                        class="bg-blue-500 text-white px-4 py-1.5 rounded-lg text-xs font-bold hover:bg-blue-600 transition-all">
                                        Search
                                    </button>
                                    <button
                                        onclick="document.getElementById('globalSearchInput').value=''; document.getElementById('globalSearchBar').classList.add('hidden')"
                                        class="bg-gray-200 text-gray-700 px-3 py-1.5 rounded-lg text-xs font-bold hover:bg-gray-300 transition-all">
                                        √ó
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Content Container -->
                    <div class="p-6">

                        <div id="empMessage"
                            class="hidden mb-6 p-4 rounded-2xl text-sm glass-card border-l-4 border-blue-500">
                        </div>

                        <!-- Order Form Tab -->
                        <div id="empOrderTab" class="animate-fadeIn">
                            <div class="glass-card p-6 lg:p-8 border-t-4 border-blue-500 relative">
                                <div class="flex items-center gap-3 mb-8 pb-4 border-b border-dashed border-gray-200">
                                    <span
                                        class="w-10 h-10 rounded-lg bg-emerald-100 flex items-center justify-center text-xl">üìù</span>
                                    <div>
                                        <h2 class="text-xl font-bold text-gray-800">New Order Entry</h2>
                                        <p class="text-xs text-gray-500 font-medium uppercase tracking-wider">Fill
                                            details
                                            carefully
                                        </p>
                                    </div>
                                </div>

                                <form id="orderForm" class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                                    <!-- Left Column -->
                                    <div class="space-y-4">
                                        <div><label class="block text-sm font-medium mb-1">Customer Name
                                                *</label><input type="text" name="customerName" required
                                                style="text-transform: capitalize;"
                                                oninput="this.value = toTitleCase(this.value)"
                                                class="w-full border-2 rounded-xl px-4 py-2.5 focus:border-blue-500 outline-none">
                                        </div>
                                        <div><label class="block text-sm font-medium mb-1">Address
                                                (Auto-filled)</label><textarea name="address" readonly rows="2"
                                                class="w-full border-2 rounded-xl px-4 py-2.5 bg-gray-50 text-sm"></textarea>
                                        </div>
                                        <div class="grid grid-cols-2 gap-3">
                                            <div><label class="block text-xs font-medium mb-1">H.
                                                    NO.</label><input type="text" name="hNo"
                                                    class="w-full border-2 rounded-lg px-3 py-2 text-sm">
                                            </div>
                                            <div><label class="block text-xs font-medium mb-1">BLOCK/GALI</label><input
                                                    type="text" name="blockGaliNo"
                                                    class="w-full border-2 rounded-lg px-3 py-2 text-sm">
                                            </div>
                                        </div>
                                        <div class="grid grid-cols-2 gap-3">
                                            <div><label class="block text-xs font-medium mb-1">VILL/COLONY
                                                    *</label><input type="text" name="villColony" required
                                                    class="w-full border-2 rounded-lg px-3 py-2 text-sm">
                                            </div>
                                            <div><label class="block text-xs font-medium mb-1">LANDMARK</label><input
                                                    type="text" name="landMark"
                                                    class="w-full border-2 rounded-lg px-3 py-2 text-sm">
                                            </div>
                                        </div>
                                        <div class="grid grid-cols-2 gap-3">
                                            <div class="relative"><label
                                                    class="block text-xs font-medium mb-1">P.O.</label><input
                                                    type="text" name="po" autocomplete="off"
                                                    oninput="handlePostOfficeInput(this.value)"
                                                    class="w-full border-2 rounded-lg px-3 py-2 text-sm">
                                                <ul id="poSuggestions"
                                                    class="absolute z-50 w-full bg-white border border-gray-300 rounded-b-lg shadow-lg max-h-48 overflow-y-auto hidden">
                                                </ul>
                                            </div>
                                            <div><label class="block text-xs font-medium mb-1">TAH/TALUKA</label><input
                                                    type="text" name="tahTaluka"
                                                    class="w-full border-2 rounded-lg px-3 py-2 text-sm">
                                            </div>
                                        </div>
                                        <div class="grid grid-cols-2 gap-3">
                                            <div class="relative"><label class="block text-xs font-medium mb-1">DISTT.
                                                    *</label><input type="text" name="distt" required autocomplete="off"
                                                    oninput="handleDistrictInput(this.value)"
                                                    class="w-full border-2 rounded-lg px-3 py-2 text-sm">
                                                <ul id="districtSuggestions"
                                                    class="absolute z-50 w-full bg-white border border-gray-300 rounded-b-lg shadow-lg max-h-48 overflow-y-auto hidden">
                                                </ul>
                                            </div>
                                            <div><label class="block text-xs font-medium mb-1">STATE
                                                    *</label><input type="text" name="state" required
                                                    class="w-full border-2 rounded-lg px-3 py-2 text-sm">
                                            </div>
                                        </div>
                                        <div class="grid grid-cols-2 gap-3">
                                            <div><label class="block text-xs font-medium mb-1">PIN
                                                    *</label><input type="text" name="pin" required maxlength="6"
                                                    oninput="fetchPincodeDetails(this.value)"
                                                    class="w-full border-2 rounded-lg px-3 py-2 text-sm">
                                            </div>
                                        </div>
                                        <div><label class="block text-xs font-medium mb-1">TREATMENT</label><input
                                                type="text" name="treatment"
                                                class="w-full border-2 rounded-lg px-3 py-2 text-sm">
                                        </div>
                                    </div>
                                    <!-- Right Column -->
                                    <div class="space-y-4">
                                        <div class="grid grid-cols-2 gap-3">
                                            <div><label class="block text-sm font-medium mb-1">Date
                                                    *</label><input type="date" name="date" required
                                                    class="w-full border-2 rounded-xl px-4 py-2.5 bg-white font-medium text-gray-700">
                                            </div>
                                            <div><label class="block text-sm font-medium mb-1">Time</label><input
                                                    type="time" name="time"
                                                    class="w-full border-2 rounded-xl px-4 py-2">
                                            </div>
                                        </div>
                                        <div><label class="block text-sm font-medium mb-1">Tel No.
                                                *</label><input type="tel" name="telNo" required maxlength="10"
                                                pattern="\d{10}" title="10 digit mobile number"
                                                class="w-full border-2 rounded-xl px-4 py-2">
                                        </div>
                                        <div><label class="block text-sm font-medium mb-1">Alt
                                                No.</label><input type="tel" name="altNo"
                                                class="w-full border-2 rounded-xl px-4 py-2">
                                        </div>
                                        <div><label class="block text-sm font-medium mb-1">Order
                                                Type</label>
                                            <div class="flex gap-4 mt-1"><label class="flex items-center"><input
                                                        type="radio" name="orderType" value="NEW" checked
                                                        class="mr-2">NEW</label><label class="flex items-center"><input
                                                        type="radio" name="orderType" value="REORDER"
                                                        class="mr-2">REORDER</label></div>
                                        </div>
                                        <!-- Items -->
                                        <div class="bg-emerald-50 p-4 rounded-xl border border-blue-200">
                                            <div class="flex justify-between items-center mb-3">
                                                <label class="font-bold text-blue-700">üõí
                                                    ITEMS</label><button type="button" onclick="addItem()"
                                                    class="bg-emerald-600 text-white px-3 py-1 rounded-lg text-sm hover:bg-emerald-700">+Add</button>
                                            </div>
                                            <div id="itemsContainer" class="space-y-2 max-h-40 overflow-y-auto">
                                            </div>
                                            <div
                                                class="mt-3 pt-3 border-t border-blue-300 flex justify-between items-center font-bold text-lg">
                                                <span>Total:</span>
                                                <div class="flex flex-col items-end">
                                                    <input type="number" id="totalAmountInput" value="0"
                                                        oninput="calculateCOD()"
                                                        class="w-32 bg-white border-2 border-red-200 rounded-lg px-2 py-1 text-red-500 text-right outline-none focus:border-red-500 transition-colors">
                                                    <span id="comboBadge"
                                                        class="hidden text-[10px] bg-red-100 text-red-500 px-2 py-0.5 rounded-full mt-1 animate-bounce">üéÅ
                                                        COMBO OFFER</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="grid grid-cols-2 gap-3">
                                            <div><label class="block text-sm font-medium mb-1">Advance</label><input
                                                    type="number" name="advance" value="0" min="0"
                                                    oninput="calculateCOD()"
                                                    class="w-full border-2 rounded-xl px-4 py-2">
                                            </div>
                                            <div><label class="block text-sm font-medium mb-1">COD
                                                    Amount</label><input type="number" name="codAmount" readonly
                                                    class="w-full border-2 rounded-xl px-4 py-2 bg-red-50 text-red-700 font-bold">
                                            </div>
                                        </div><button type="button" onclick="saveOrder()"
                                            class="w-full btn-primary text-white py-3 rounded-xl font-black text-sm shadow-lg hover:shadow-xl hover:-translate-y-0.5 transition-all uppercase tracking-widest mt-2">üíæ
                                            SAVE ORDER</button>
                                    </div>
                                </form>
                            </div>
                        </div>

                        <!-- Tracking Tab -->
                        <div id="empTrackingTab" class="hidden animate-fadeIn">
                            <!-- Modern Compact Header -->
                            <div class="flex flex-col gap-3 mb-6 px-2">
                                <div class="flex items-center gap-2">
                                    <span class="w-1.5 h-6 bg-blue-500 rounded-full block"></span>
                                    <div class="relative flex-1">
                                        <span
                                            class="absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-xs">üîç</span>
                                        <input type="text" id="myOrdersSearch" placeholder="Search Mobile/Name/ID..."
                                            oninput="filterMyOrders(this.value)"
                                            class="w-full pl-8 pr-4 py-2 border-2 border-slate-100 rounded-xl text-xs focus:border-blue-400 outline-none transition-all bg-white" />
                                    </div>
                                    <button type="button" onclick="loadMyOrders()"
                                        class="bg-blue-50 text-blue-600 p-2 rounded-xl hover:bg-blue-100 transition-all">
                                        <span class="text-sm">üîÑ</span>
                                    </button>
                                </div>

                                <div class="flex gap-2">
                                    <input type="date" id="myOrdersDate" onchange="loadMyOrders()"
                                        class="flex-1 border-2 border-slate-50 rounded-xl px-3 py-1.5 text-xs font-bold outline-none focus:border-blue-400 bg-white">
                                    <div
                                        class="bg-blue-600 text-white px-3 py-1.5 rounded-xl text-[10px] font-black flex items-center shadow-sm uppercase tracking-tighter">
                                        Live Status
                                    </div>
                                </div>
                            </div>
                            <div id="myOrdersStats" class="grid grid-cols-3 md:grid-cols-6 gap-2 mb-6 px-1"></div>
                            <div id="myOrdersList" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div>
                        </div>

                        <!-- History Tab -->
                        <div id="empHistoryTab" class="hidden animate-fadeIn">
                            <div class="flex flex-col gap-3 mb-6 px-2">
                                <div class="flex items-center gap-2">
                                    <span class="w-1.5 h-6 bg-slate-500 rounded-full block"></span>
                                    <div class="relative flex-1">
                                        <span
                                            class="absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-xs">üîç</span>
                                        <input type="text" id="historySearch" placeholder="Search History Mobile..."
                                            oninput="filterMyHistory(this.value)"
                                            class="w-full pl-8 pr-4 py-2 border-2 border-slate-100 rounded-xl text-xs focus:border-slate-400 outline-none transition-all bg-white" />
                                    </div>
                                    <input type="date" id="empHistoryDate" onchange="loadMyHistory()"
                                        class="border-2 border-slate-50 rounded-xl px-2 py-1.5 text-xs font-bold outline-none focus:border-slate-400 bg-white">
                                </div>
                            </div>
                            <!-- Changed from space-y-3 to grid for Cards -->
                            <div id="myHistoryList" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div>
                        </div>

                        <!-- Progress Tab -->
                        <div id="empProgressTab" class="hidden animate-fadeIn">
                            <div class="glass-card p-6 mb-6">
                                <div class="mb-6">
                                    <h2 class="text-xl font-bold text-gray-800 flex items-center gap-2 mb-4">
                                        <span class="w-2 h-8 bg-purple-500 rounded-full block"></span>
                                        üìä My Progress Report
                                    </h2>
                                    <div class="flex flex-col sm:flex-row gap-3">
                                        <input type="date" id="empProgressStartDate"
                                            class="border-2 border-gray-200 rounded-xl px-4 py-2.5 text-sm w-full sm:w-auto">
                                        <input type="date" id="empProgressEndDate"
                                            class="border-2 border-gray-200 rounded-xl px-4 py-2.5 text-sm w-full sm:w-auto">
                                        <button type="button" onclick="loadEmpProgress()"
                                            class="bg-purple-500 text-white px-6 py-2.5 rounded-xl text-sm font-bold hover:bg-purple-600 transition-all w-full sm:w-auto">
                                            üîç Filter
                                        </button>
                                    </div>
                                </div>
                                <div id="empProgressStats" class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6"></div>
                                <div id="empProgressChart" class="mb-6"></div>
                                <div id="empProgressTable"></div>
                            </div>
                        </div>

                        <!-- OFD Tab -->
                        <div id="empOfdTab" class="hidden animate-fadeIn">
                            <div class="flex flex-col gap-3 mb-6 px-2">
                                <div class="flex items-center gap-2">
                                    <span class="w-1.5 h-6 bg-orange-400 rounded-full block"></span>
                                    <div class="relative flex-1">
                                        <span
                                            class="absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-xs">üîç</span>
                                        <input type="text" id="myOfdOrdersSearch" placeholder="Search OFD Orders..."
                                            oninput="filterMyOfdOrders(this.value)"
                                            class="w-full pl-8 pr-4 py-2 border-2 border-orange-100 rounded-xl text-xs focus:border-orange-400 outline-none transition-all bg-white" />
                                    </div>
                                    <button type="button" onclick="loadMyOfdOrders()"
                                        class="bg-orange-50 text-orange-600 p-2 rounded-xl hover:bg-orange-100 transition-all">
                                        <span class="text-sm">üîÑ</span>
                                    </button>
                                </div>
                            </div>
                            <div id="empOfdList" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                            </div>
                        </div>

                        <!-- Cancelled Tab -->
                        <div id="empCancelledTab" class="hidden animate-fadeIn">
                            <div class="flex flex-col gap-3 mb-6 px-2">
                                <div class="flex items-center gap-2">
                                    <span class="w-1.5 h-6 bg-red-400 rounded-full block"></span>
                                    <div class="relative flex-1">
                                        <span
                                            class="absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-xs">üîç</span>
                                        <input type="text" id="myCancelledOrdersSearch"
                                            placeholder="Search Cancelled..."
                                            oninput="filterMyCancelledOrders(this.value)"
                                            class="w-full pl-8 pr-4 py-2 border-2 border-red-100 rounded-xl text-xs focus:border-red-400 outline-none transition-all bg-white" />
                                    </div>
                                    <button type="button" onclick="loadMyCancelledOrders()"
                                        class="bg-red-50 text-red-600 p-2 rounded-xl hover:bg-red-100 transition-all">
                                        <span class="text-sm">üîÑ</span>
                                    </button>
                                </div>
                                <div class="flex gap-2">
                                    <input type="date" id="myCancelledOrdersDate" onchange="loadMyCancelledOrders()"
                                        class="flex-1 border-2 border-red-50 rounded-xl px-2 py-1.5 text-xs font-bold outline-none focus:border-red-400 bg-white">
                                </div>
                            </div>
                            <!-- This will contain the list of cancelled orders -->
                            <div id="empCancelledList" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                            </div>
                        </div>
                    </div>
            </div><!-- End Progress Tab -->
        </div>
    </div><!-- End Content Container -->
    </main><!-- End Main Content -->
    </div><!-- End Flex Container -->
    </div><!-- End Employee Panel -->

    <!--====================DEPARTMENT PANEL====================-->
    <div id="departmentPanel" class="hidden animate-fadeIn font-['Poppins']">
        <div class="flex min-h-screen bg-slate-50 relative">

            <!-- DEPARTMENT SIDEBAR BACKDROP (Mobile) -->
            <div id="deptSidebarBackdrop" onclick="toggleDeptSidebar()"
                class="fixed inset-0 bg-slate-900/40 backdrop-blur-sm z-30 opacity-0 pointer-events-none backdrop-fade lg:hidden">
            </div>

            <!-- DEPARTMENT SIDEBAR -->
            <aside id="deptSidebar"
                class="w-64 bg-white border-r border-slate-200 flex-shrink-0 flex flex-col fixed left-0 top-0 h-full z-40 transform -translate-x-full lg:translate-x-0 sidebar-bouncy shadow-xl lg:shadow-none">

                <!-- Logo Header -->
                <div class="p-5 border-b border-slate-100 bg-gradient-to-r from-emerald-50 to-teal-50 relative">
                    <div class="flex items-center gap-3">
                        <div
                            class="w-11 h-11 bg-gradient-to-br from-indigo-500 to-indigo-600 rounded-xl flex items-center justify-center p-1.5 shadow-lg shadow-indigo-200">
                            <img src="icon.png" alt="HON" class="w-full h-full object-contain">
                        </div>
                        <div>
                            <h1 class="text-lg font-black tracking-tight text-slate-800">Herb On Naturals
                            </h1>
                            <p class="text-[10px] text-indigo-600 font-semibold -mt-0.5" id="deptSidebarSubtitle">
                                Dept Panel</p>
                        </div>
                    </div>
                </div>

                <!-- Sidebar Navigation -->
                <nav class="flex-1 py-4 overflow-y-auto">

                    <!-- VERIFICATION NAV GROUP -->
                    <div id="navGroupVerification" class="hidden px-3 space-y-1 mb-6">
                        <p class="text-[10px] font-bold text-slate-400 uppercase tracking-wider px-3 mb-2">
                            Verification</p>
                        <button onclick="switchVerificationTab('pending')" id="deptTabPending"
                            class="sidebar-nav-item w-full flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm font-medium text-slate-600 hover:bg-indigo-50 hover:text-indigo-600 transition-all">
                            <span class="text-lg">üìç</span>
                            <span class="flex-1 text-left">Pending</span>
                        </button>
                        <button onclick="switchVerificationTab('unverified')" id="deptTabUnverified"
                            class="sidebar-nav-item w-full flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm font-medium text-slate-600 hover:bg-indigo-50 hover:text-indigo-600 transition-all">
                            <span class="text-lg">‚è∏Ô∏è</span>
                            <span class="flex-1 text-left">On Hold</span>
                        </button>
                        <button onclick="switchVerificationTab('history')" id="deptTabHistory"
                            class="sidebar-nav-item w-full flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm font-medium text-slate-600 hover:bg-indigo-50 hover:text-indigo-600 transition-all">
                            <span class="text-lg">üìã</span>
                            <span class="flex-1 text-left">History</span>
                        </button>
                        <button onclick="switchVerificationTab('cancelled')" id="deptTabCancelled"
                            class="sidebar-nav-item w-full flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm font-medium text-slate-600 hover:bg-indigo-50 hover:text-indigo-600 transition-all">
                            <span class="text-lg">‚ùå</span>
                            <span class="flex-1 text-left">Cancelled</span>
                        </button>
                    </div>

                    <!-- DISPATCH NAV GROUP -->
                    <div id="navGroupDispatch" class="hidden px-3 space-y-1 mb-6">
                        <p class="text-[10px] font-bold text-slate-400 uppercase tracking-wider px-3 mb-2">
                            Dispatch
                        </p>
                        <button onclick="switchDispatchTab('ready')" id="deptTabReady"
                            class="sidebar-nav-item w-full flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm font-medium text-slate-600 hover:bg-indigo-50 hover:text-indigo-600 transition-all">
                            <span class="text-lg">üì¶</span>
                            <span class="flex-1 text-left">Ready</span>
                        </button>
                        <button onclick="switchDispatchTab('dispatched')" id="deptTabDispatched"
                            class="sidebar-nav-item w-full flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm font-medium text-slate-600 hover:bg-indigo-50 hover:text-indigo-600 transition-all">
                            <span class="text-lg">üöö</span>
                            <span class="flex-1 text-left">Dispatched</span>
                        </button>
                        <button onclick="switchDispatchTab('history')" id="deptTabDispatchHistory"
                            class="sidebar-nav-item w-full flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm font-medium text-slate-600 hover:bg-indigo-50 hover:text-indigo-600 transition-all">
                            <span class="text-lg">üìà</span>
                            <span class="flex-1 text-left">Stats</span>
                        </button>
                    </div>

                    <!-- DELIVERY NAV GROUP -->
                    <div id="navGroupDelivery" class="hidden px-3 space-y-1 mb-6">
                        <p class="text-[10px] font-bold text-slate-400 uppercase tracking-wider px-3 mb-2">
                            Delivery
                        </p>
                        <button onclick="switchDeliveryTab('requests')" id="deptTabRequests"
                            class="sidebar-nav-item w-full flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm font-medium text-slate-600 hover:bg-indigo-50 hover:text-indigo-600 transition-all relative">
                            <span class="text-lg">üì¨</span>
                            <span class="flex-1 text-left">Requests</span>
                            <span id="requestsCountDept"
                                class="absolute right-3 bg-rose-500 text-white text-[10px] px-1.5 py-0.5 rounded-full">0</span>
                        </button>
                        <button onclick="switchDeliveryTab('onway')" id="deptTabOnWay"
                            class="sidebar-nav-item w-full flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm font-medium text-slate-600 hover:bg-indigo-50 hover:text-indigo-600 transition-all">
                            <span class="text-lg">üöö</span>
                            <span class="flex-1 text-left">On Way</span>
                        </button>
                        <button onclick="switchDeliveryTab('ofd')" id="deptTabOFD"
                            class="sidebar-nav-item w-full flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm font-medium text-slate-600 hover:bg-indigo-50 hover:text-indigo-600 transition-all">
                            <span class="text-lg">üì¶</span>
                            <span class="flex-1 text-left">OFD</span>
                        </button>
                        <button onclick="switchDeliveryTab('delivered')" id="deptTabDelivered"
                            class="sidebar-nav-item w-full flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm font-medium text-slate-600 hover:bg-indigo-50 hover:text-indigo-600 transition-all">
                            <span class="text-lg">‚úÖ</span>
                            <span class="flex-1 text-left">Delivered</span>
                        </button>

                        <button onclick="switchDeliveryTab('rto')" id="deptTabRTO"
                            class="sidebar-nav-item w-full flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm font-medium text-slate-600 hover:bg-indigo-50 hover:text-indigo-600 transition-all">
                            <span class="text-lg">‚Ü©Ô∏è</span>
                            <span class="flex-1 text-left">RTO</span>
                        </button>

                    </div>

                </nav>

                <!-- Sidebar Footer Actions -->
                <div class="p-4 border-t border-slate-100 bg-slate-50">
                    <button onclick="logout()"
                        class="w-full bg-white text-rose-500 border border-rose-200 px-4 py-2.5 rounded-xl text-sm font-bold hover:bg-rose-50 transition-all flex items-center justify-center gap-2">
                        <span>üö™</span> Logout
                    </button>
                </div>
            </aside>

            <!-- MAIN CONTENT AREA -->
            <div class="flex-1 lg:ml-64 h-screen flex flex-col overflow-hidden">

                <!-- TOP HEADER -->
                <header class="bg-white/95 backdrop-blur-md border-b border-slate-200 shadow-sm">
                    <div class="px-4 sm:px-6 py-3 flex items-center gap-4">

                        <!-- Mobile Menu Toggle -->
                        <button onclick="toggleDeptSidebar()"
                            class="lg:hidden p-2 rounded-xl hover:bg-slate-100 transition-colors">
                            <svg class="w-6 h-6 text-slate-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M4 6h16M4 12h16M4 18h16" />
                            </svg>
                        </button>

                        <!-- Dept Identification -->
                        <div class="flex items-center gap-3">
                            <h2 id="deptHeaderTitle" class="text-sm font-bold text-slate-800 hidden md:block">
                                Verification Dept</h2>
                            <span class="text-slate-300 hidden md:block">|</span>
                            <div
                                class="flex items-center gap-1.5 px-3 py-1 bg-indigo-50 rounded-lg border border-indigo-100">
                                <span class="text-[10px] font-bold text-indigo-400 uppercase tracking-tight">ID:</span>
                                <span id="deptIdDisplay" class="text-xs font-black text-indigo-600 font-mono"></span>
                            </div>
                        </div>

                        <!-- Search Bar -->
                        <div class="flex-1 max-w-lg relative">
                            <svg class="absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400" fill="none"
                                stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                            </svg>
                            <input type="text" id="deptHeaderSearch" placeholder="Search orders... (3+ chars)"
                                class="w-full pl-11 pr-4 py-2 bg-slate-50 border border-slate-200 rounded-xl text-sm font-medium outline-none focus:bg-white focus:border-indigo-400 focus:ring-2 focus:ring-indigo-100 transition-all placeholder:text-slate-400"
                                oninput="filterDeptOrdersHeader(this.value)"
                                onkeypress="handleHeaderSearchKeypress(event, this)">
                        </div>


                        <!-- Common Header Actions/Filters -->
                        <div class="ml-auto flex items-center gap-3">
                            <button id="deptExportBtn"
                                class="hidden bg-emerald-600 text-white px-4 py-2 rounded-xl text-xs font-bold hover:bg-emerald-700 shadow-sm transition-all flex items-center gap-2">
                                <span>üì•</span> Export Data
                            </button>
                            <input type="date" id="headerDateFilter"
                                class="hidden border border-slate-200 rounded-xl px-3 py-1.5 text-xs font-medium focus:border-indigo-400 outline-none">
                        </div>
                    </div>
                </header>

                <!-- SCROLLABLE CONTENT BODY -->
                <div class="flex-1 overflow-y-auto p-4 md:p-8">
                    <div id="deptMessage"
                        class="hidden mb-6 p-4 rounded-xl text-sm border-l-4 border-indigo-500 bg-white shadow-sm font-medium">
                    </div>

                    <!-- Verification Dept Content -->
                    <div id="verificationDeptContent" class="hidden space-y-6">

                        <!-- PENDING TAB -->
                        <div id="verificationPendingTab" class="animate-fadeIn">
                            <div class="bg-white -mx-8 px-8 pb-8 pt-4 shadow-lg mb-0">
                                <div class="flex flex-col md:flex-row justify-between items-center px-2 gap-4">
                                    <h2 class="text-xl font-bold text-gray-800 flex items-center gap-2">
                                        <span class="w-2 h-8 bg-blue-500 rounded-full block"></span>
                                        Pending Verification
                                    </h2>
                                    <div class="flex flex-col md:flex-row gap-3 w-full md:w-auto">
                                        <!-- Dashboard Stats (Mini) -->
                                        <div class="flex gap-2 mr-4">
                                            <div
                                                class="bg-blue-100 text-blue-700 px-3 py-1 rounded-lg border border-blue-200 flex flex-col items-center">
                                                <span class="text-[10px] font-bold uppercase">Today</span>
                                                <span class="text-lg font-black leading-none"
                                                    id="miniStatVerifyToday">0</span>
                                            </div>
                                            <div
                                                class="bg-indigo-100 text-indigo-700 px-3 py-1 rounded-lg border border-indigo-200 flex flex-col items-center">
                                                <span class="text-[10px] font-bold uppercase">Yest</span>
                                                <span class="text-lg font-black leading-none"
                                                    id="miniStatVerifyYesterday">0</span>
                                            </div>
                                            <div
                                                class="bg-purple-100 text-purple-700 px-3 py-1 rounded-lg border border-purple-200 flex flex-col items-center">
                                                <span class="text-[10px] font-bold uppercase">7 Days</span>
                                                <span class="text-lg font-black leading-none"
                                                    id="miniStatVerifyWeek">0</span>
                                            </div>
                                        </div>

                                        <input type="text" id="verificationPendingSearch"
                                            placeholder="üîç Search Mobile/Name..."
                                            oninput="filterVerificationOrders(this.value)"
                                            class="w-full md:flex-1 border-2 rounded-xl px-4 py-2 text-sm font-medium focus:border-blue-500 outline-none">
                                        <input type="date" id="verificationPendingDate" onchange="loadDeptOrders()"
                                            class="w-full md:w-auto border-2 rounded-xl px-4 py-2 text-sm font-medium focus:border-blue-500 outline-none">
                                        <button type="button" onclick="loadDeptOrders()"
                                            class="w-full md:w-auto text-blue-600 hover:bg-blue-50 px-4 py-2 rounded-xl text-sm font-bold transition-colors flex items-center justify-center gap-2">
                                            <span>üîÑ</span> Refresh
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <!-- Quick Filter Buttons -->
                            <div id="dateFilterButtons" class="bg-white mb-4 px-2 hidden shadow-md">
                                <div
                                    class="flex flex-wrap gap-2 items-center p-3 bg-gradient-to-r from-blue-50 to-emerald-50 rounded-xl border border-blue-200 shadow-sm">
                                    <span class="text-xs font-bold text-gray-600 uppercase tracking-wide">Quick
                                        Filters:</span>
                                    <div id="filterButtonsContainer" class="flex flex-wrap gap-2"></div>
                                </div>
                            </div>
                            <div id="pendingVerificationList"
                                class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6">
                            </div>
                        </div>

                        <!-- UNVERIFIED TAB -->
                        <div id="verificationUnverifiedTab" class="hidden animate-fadeIn">
                            <div class="flex flex-col md:flex-row justify-between items-center mb-6 px-2 gap-4">
                                <h2 class="text-xl font-bold text-gray-800 flex items-center gap-2">
                                    <span class="w-2 h-8 bg-yellow-500 rounded-full block"></span>
                                    On Hold / Unverified
                                </h2>
                                <div class="flex flex-col md:flex-row gap-2 w-full">
                                    <input type="text" id="verificationUnverifiedSearch" placeholder="Filter List..."
                                        class="w-full bg-white border border-gray-200 rounded-xl px-4 py-2 text-sm focus:outline-none focus:border-yellow-500"
                                        oninput="filterVerificationUnverified()">
                                    <button type="button" onclick="loadVerificationUnverified()"
                                        class="w-full md:w-auto bg-yellow-100 text-yellow-700 px-4 py-2 rounded-xl text-sm font-bold hover:bg-yellow-200 transition-colors">
                                        üîÑ Refresh
                                    </button>
                                </div>
                            </div>
                            <div id="verificationUnverifiedList"
                                class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6">
                            </div>
                        </div>

                        <!-- HISTORY TAB -->
                        <div id="verificationHistoryTab" class="hidden animate-fadeIn">
                            <div class="flex justify-between items-center mb-8 px-2">
                                <h2 class="text-xl font-bold text-gray-800 flex items-center gap-2">
                                    <span class="w-2 h-8 bg-purple-500 rounded-full block"></span>
                                    Participation Stats
                                </h2>
                                <button type="button" onclick="loadVerificationHistory()"
                                    class="text-purple-600 hover:bg-purple-50 px-4 py-2 rounded-xl text-sm font-bold transition-colors">
                                    üîÑ Refresh Data
                                </button>
                            </div>

                            <!-- Modern Stats Cards -->
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                                <!-- Today -->
                                <div onclick="applyQuickDateFilter('verificationHistory', 'today')"
                                    class="glass-card p-6 border-b-4 border-blue-500 relative overflow-hidden group hover:shadow-lg transition-all cursor-pointer">
                                    <div
                                        class="absolute right-0 top-0 p-4 opacity-10 group-hover:opacity-20 transition-opacity transform group-hover:scale-110">
                                        <span class="text-6xl">üìÖ</span>
                                    </div>
                                    <p class="text-sm font-bold text-gray-500 uppercase tracking-wider mb-1">
                                        Verified Today</p>
                                    <h3 class="text-4xl font-bold text-gray-800" id="statsVerifyToday">0
                                    </h3>
                                </div>

                                <!-- Yesterday -->
                                <div onclick="applyQuickDateFilter('verificationHistory', 'yesterday')"
                                    class="glass-card p-6 border-b-4 border-indigo-500 relative overflow-hidden group hover:shadow-lg transition-all cursor-pointer">
                                    <div
                                        class="absolute right-0 top-0 p-4 opacity-10 group-hover:opacity-20 transition-opacity transform group-hover:scale-110">
                                        <span class="text-6xl">‚èÆÔ∏è</span>
                                    </div>
                                    <p class="text-sm font-bold text-gray-500 uppercase tracking-wider mb-1">
                                        Yesterday</p>
                                    <h3 class="text-4xl font-bold text-gray-800" id="statsVerifyYesterday">0
                                    </h3>
                                </div>

                                <!-- Weekly -->
                                <div onclick="applyQuickDateFilter('verificationHistory', 'week')"
                                    class="glass-card p-6 border-b-4 border-purple-500 relative overflow-hidden group hover:shadow-lg transition-all cursor-pointer">
                                    <div
                                        class="absolute right-0 top-0 p-4 opacity-10 group-hover:opacity-20 transition-opacity transform group-hover:scale-110">
                                        <span class="text-6xl">üìä</span>
                                    </div>
                                    <p class="text-sm font-bold text-gray-500 uppercase tracking-wider mb-1">
                                        Last 7
                                        Days</p>
                                    <h3 class="text-4xl font-bold text-gray-800" id="statsVerifyWeek">0</h3>
                                </div>
                            </div>

                            <!-- Filters Section -->
                            <div class="bg-gray-50 p-6 rounded-2xl border border-gray-100 mb-8">
                                <div class="grid grid-cols-1 md:grid-cols-4 gap-4 items-end">
                                    <div class="md:col-span-1">
                                        <label
                                            class="block text-xs font-bold text-gray-500 mb-1 ml-1 uppercase">Search</label>
                                        <div class="relative">
                                            <span class="absolute left-3 top-2.5 text-gray-400">üîç</span>
                                            <input type="text" id="verificationHistorySearch"
                                                placeholder="Name, Phone..."
                                                class="w-full pl-9 pr-4 py-2 border rounded-xl text-sm focus:ring-2 focus:ring-blue-100 outline-none"
                                                oninput="loadVerificationHistory()">
                                        </div>
                                    </div>
                                    <div>
                                        <label
                                            class="block text-xs font-bold text-gray-500 mb-1 ml-1 uppercase">From</label>
                                        <input type="date" id="verificationHistoryStartDate"
                                            class="w-full py-2 px-3 border rounded-xl text-sm focus:ring-2 focus:ring-blue-100 outline-none"
                                            onchange="loadVerificationHistory()">
                                    </div>
                                    <div>
                                        <label
                                            class="block text-xs font-bold text-gray-500 mb-1 ml-1 uppercase">To</label>
                                        <input type="date" id="verificationHistoryEndDate"
                                            class="w-full py-2 px-3 border rounded-xl text-sm focus:ring-2 focus:ring-blue-100 outline-none"
                                            onchange="loadVerificationHistory()">
                                    </div>
                                    <div>
                                        <button onclick="resetVerificationHistoryFilters()"
                                            class="w-full bg-white border border-red-100 text-red-500 font-bold py-2 rounded-xl text-sm hover:bg-red-50 transition-colors">
                                            Clear Filters
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <div id="verificationHistoryList"
                                class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6">
                            </div>
                        </div>

                        <!-- CANCELLED TAB -->
                        <div id="verificationCancelledTab" class="hidden animate-fadeIn">
                            <div class="flex justify-between items-center mb-4">
                                <h3 class="text-xl font-bold text-gray-800">‚ùå Cancelled Orders</h3>
                                <div class="flex gap-2">
                                    <input type="text" placeholder="Search Cancelled Orders..."
                                        oninput="loadVerificationCancelled()"
                                        class="px-4 py-2 border-2 border-red-200 rounded-xl text-sm font-medium focus:border-red-500 outline-none">
                                    <button onclick="loadVerificationCancelled()"
                                        class="text-red-600 hover:bg-red-50 px-4 py-2 rounded-xl text-sm font-bold">üîÑ
                                        Refresh</button>
                                </div>
                            </div>
                            <div id="verificationCancelledList"
                                class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6">
                            </div>
                        </div>
                    </div>

                    <!-- Dispatch Dept Content -->
                    <div id="dispatchDeptContent" class="hidden space-y-6">

                        <!-- READY TAB -->
                        <div id="dispatchReadyTab" class="hidden animate-fadeIn">
                            <div class="bg-white -mx-8 px-8 pb-8 pt-4 shadow-lg mb-0">
                                <div class="flex flex-col md:flex-row justify-between items-center px-2 gap-4">
                                    <h2 class="text-xl font-bold text-gray-800 flex items-center gap-2">
                                        <span class="w-2 h-8 bg-blue-500 rounded-full block"></span>
                                        Ready to Dispatch
                                    </h2>

                                    <div class="flex flex-col md:flex-row gap-3 w-full md:w-auto">
                                        <!-- Dashboard Stats (Mini) -->
                                        <div class="flex gap-2 mr-4">
                                            <div
                                                class="bg-purple-100 text-purple-700 px-3 py-1 rounded-lg border border-purple-200 flex flex-col items-center">
                                                <span class="text-[10px] font-bold uppercase">Today</span>
                                                <span class="text-lg font-black leading-none"
                                                    id="miniStatDispatchToday">0</span>
                                            </div>
                                            <div
                                                class="bg-indigo-100 text-indigo-700 px-3 py-1 rounded-lg border border-indigo-200 flex flex-col items-center">
                                                <span class="text-[10px] font-bold uppercase">Yest</span>
                                                <span class="text-lg font-black leading-none"
                                                    id="miniStatDispatchYesterday">0</span>
                                            </div>
                                            <div
                                                class="bg-blue-100 text-blue-700 px-3 py-1 rounded-lg border border-blue-200 flex flex-col items-center">
                                                <span class="text-[10px] font-bold uppercase">7 Days</span>
                                                <span class="text-lg font-black leading-none"
                                                    id="miniStatDispatchWeek">0</span>
                                            </div>
                                        </div>

                                        <input type="text" id="dispatchReadySearch" placeholder="üîç Search..."
                                            oninput="loadDeptOrders()"
                                            class="w-full md:w-40 border-2 rounded-xl px-3 py-2 text-sm font-medium focus:border-blue-500 outline-none">
                                        <input type="date" id="dispatchReadyDate" onchange="loadDeptOrders()"
                                            class="w-full md:w-auto border-2 rounded-xl px-3 py-2 text-sm font-medium focus:border-blue-500 outline-none">
                                        <button type="button" onclick="syncShiprocketStatus()" id="btnSyncShiprocket"
                                            class="text-blue-600 hover:bg-blue-50 px-4 py-2 rounded-xl text-sm font-bold transition-colors flex items-center gap-2 border border-blue-200">
                                            ‚òÅÔ∏è Sync Status
                                        </button>
                                        <button type="button" onclick="loadDeptOrders()"
                                            class="text-blue-600 hover:bg-blue-50 px-4 py-2 rounded-xl text-sm font-bold transition-colors flex items-center gap-2">
                                            üîÑ Refresh
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <div id="readyDispatchList" class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6">
                            </div>
                        </div>


                        <!-- DISPATCHED TAB -->
                        <div id="dispatchDispatchedTab" class="hidden animate-fadeIn">
                            <div class="bg-white -mx-8 px-8 pb-8 pt-4 shadow-lg mb-0">
                                <div class="flex justify-between items-center px-2">
                                    <h2 class="text-xl font-bold text-gray-800 flex items-center gap-2">
                                        <span class="w-2 h-8 bg-indigo-500 rounded-full block"></span>
                                        Dispatched Orders
                                    </h2>
                                    <div class="flex flex-col md:flex-row gap-3 w-full md:w-auto">
                                        <input type="text" id="dispatchedSearch" placeholder="üîç Search..."
                                            oninput="loadDispatchedOrders()"
                                            class="w-full md:w-40 border-2 rounded-xl px-3 py-2 text-sm font-medium focus:border-indigo-500 outline-none">
                                        <input type="date" id="dispatchedDateFilter" onchange="loadDispatchedOrders()"
                                            class="w-full md:w-auto border-2 rounded-xl px-3 py-2 text-sm font-medium focus:border-indigo-500 outline-none">
                                        <button type="button" onclick="syncAllAWB()"
                                            class="bg-orange-500 hover:bg-orange-600 text-white px-4 py-2 rounded-xl text-sm font-bold transition-colors flex items-center gap-2 shadow-md">
                                            üîÑ Sync AWB
                                        </button>
                                        <button type="button" onclick="exportDispatchedOrdersFiltered()"
                                            class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-xl text-sm font-bold transition-colors flex items-center gap-2 shadow-md">
                                            üì• Export Excel
                                        </button>
                                        <button type="button" onclick="loadDispatchedOrders()"
                                            class="text-indigo-600 hover:bg-indigo-50 px-4 py-2 rounded-xl text-sm font-bold transition-colors flex items-center gap-2">
                                            üîÑ Refresh
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <div id="dispatchedOrdersList" class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6">
                            </div>
                        </div>

                        <!-- HISTORY TAB -->
                        <div id="dispatchHistoryTab" class="hidden animate-fadeIn">
                            <div class="flex justify-between items-center mb-8 px-2">
                                <h2 class="text-xl font-bold text-gray-800 flex items-center gap-2">
                                    <span class="w-2 h-8 bg-purple-500 rounded-full block"></span>
                                    Dispatch Stats
                                </h2>
                                <button type="button" onclick="loadDispatchHistory()"
                                    class="text-purple-600 hover:bg-purple-50 px-4 py-2 rounded-xl text-sm font-bold transition-colors">
                                    üîÑ Refresh Data
                                </button>
                            </div>

                            <!-- Modern Stats Cards -->
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                                <!-- Today -->
                                <div
                                    class="glass-card p-6 border-b-4 border-purple-500 relative overflow-hidden group hover:shadow-lg transition-all">
                                    <div
                                        class="absolute right-0 top-0 p-4 opacity-10 group-hover:opacity-20 transition-opacity transform group-hover:scale-110">
                                        <span class="text-6xl">üì¶</span>
                                    </div>
                                    <p class="text-sm font-bold text-gray-500 uppercase tracking-wider mb-1">
                                        Dispatched Today
                                    </p>
                                    <h3 class="text-4xl font-bold text-gray-800" id="statsDispatchToday">0
                                    </h3>
                                </div>

                                <!-- Yesterday -->
                                <div
                                    class="glass-card p-6 border-b-4 border-indigo-500 relative overflow-hidden group hover:shadow-lg transition-all">
                                    <div
                                        class="absolute right-0 top-0 p-4 opacity-10 group-hover:opacity-20 transition-opacity transform group-hover:scale-110">
                                        <span class="text-6xl">‚èÆÔ∏è</span>
                                    </div>
                                    <p class="text-sm font-bold text-gray-500 uppercase tracking-wider mb-1">
                                        Yesterday</p>
                                    <h3 class="text-4xl font-bold text-gray-800" id="statsDispatchYesterday">0
                                    </h3>
                                </div>

                                <!-- Weekly -->
                                <div
                                    class="glass-card p-6 border-b-4 border-blue-500 relative overflow-hidden group hover:shadow-lg transition-all">
                                    <div
                                        class="absolute right-0 top-0 p-4 opacity-10 group-hover:opacity-20 transition-opacity transform group-hover:scale-110">
                                        <span class="text-6xl">üìä</span>
                                    </div>
                                    <p class="text-sm font-bold text-gray-500 uppercase tracking-wider mb-1">
                                        Last 7
                                        Days</p>
                                    <h3 class="text-4xl font-bold text-gray-800" id="statsDispatchWeek">0
                                    </h3>
                                </div>
                            </div>

                            <!-- Filters Section -->
                            <div class="bg-gray-50 p-6 rounded-2xl border border-gray-100 mb-8">
                                <div class="grid grid-cols-1 md:grid-cols-4 gap-4 items-end">
                                    <div class="md:col-span-1">
                                        <label
                                            class="block text-xs font-bold text-gray-500 mb-1 ml-1 uppercase">Search</label>
                                        <div class="relative">
                                            <span class="absolute left-3 top-2.5 text-gray-400">üîç</span>
                                            <input type="text" id="dispatchHistorySearch" placeholder="Name, Phone..."
                                                class="w-full pl-9 pr-4 py-2 border rounded-xl text-sm focus:ring-2 focus:ring-blue-100 outline-none"
                                                oninput="loadDispatchHistory()">
                                        </div>
                                    </div>
                                    <div>
                                        <label
                                            class="block text-xs font-bold text-gray-500 mb-1 ml-1 uppercase">From</label>
                                        <input type="date" id="dispatchHistoryStart"
                                            class="w-full py-2 px-3 border rounded-xl text-sm focus:ring-2 focus:ring-blue-100 outline-none"
                                            onchange="loadDispatchHistory()">
                                    </div>
                                    <div>
                                        <label
                                            class="block text-xs font-bold text-gray-500 mb-1 ml-1 uppercase">To</label>
                                        <input type="date" id="dispatchHistoryEnd"
                                            class="w-full py-2 px-3 border rounded-xl text-sm focus:ring-2 focus:ring-blue-100 outline-none"
                                            onchange="loadDispatchHistory()">
                                    </div>
                                    <div>
                                        <button onclick="resetDispatchHistoryFilters()"
                                            class="w-full bg-white border border-red-100 text-red-500 font-bold py-2 rounded-xl text-sm hover:bg-red-50 transition-colors">
                                            Clear Filters
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <div id="dispatchHistoryList" class="space-y-4"></div>
                        </div>

                    </div> <!-- End dispatchDeptContent -->

                    <!-- Delivery Dept Content -->
                    <div id="deliveryDeptContent" class="hidden space-y-6">

                        <!-- REQUESTS TAB -->
                        <div id="deliveryRequestsTab" class="hidden animate-fadeIn">
                            <div class="bg-white -mx-8 px-8 pb-8 pt-4 shadow-lg mb-0">
                                <div class="flex justify-between items-center px-2">
                                    <h2 class="text-xl font-bold text-gray-800 flex items-center gap-2">
                                        <span class="w-2 h-8 bg-pink-500 rounded-full block"></span>
                                        Delivery Requests
                                    </h2>
                                    <button type="button" onclick="loadDeliveryRequests()"
                                        class="text-pink-600 hover:bg-pink-50 px-4 py-2 rounded-xl text-sm font-bold transition-colors flex items-center gap-2">
                                        üîÑ Refresh
                                    </button>
                                </div>
                            </div>
                            <div id="deliveryRequestsList" class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6">
                            </div>
                        </div>

                        <!-- ON WAY TAB -->
                        <div id="deliveryOnWayTab" class="hidden animate-fadeIn">
                            <div class="bg-white -mx-8 px-8 pb-8 pt-4 shadow-lg mb-0">
                                <div class="flex flex-col md:flex-row justify-between items-center gap-3 px-2">
                                    <h2 class="text-xl font-bold text-gray-800 flex items-center gap-2">
                                        <span class="w-2 h-8 bg-blue-500 rounded-full block"></span>
                                        On Way (In Transit)
                                    </h2>
                                    <div class="flex flex-wrap items-center gap-2">
                                        <input type="text" id="onWaySearchInput"
                                            placeholder="Search by Mobile, Name, or Order ID..."
                                            oninput="filterOnWayOrders(this.value)"
                                            class="px-4 py-2 border-2 border-blue-200 rounded-xl text-sm font-medium focus:border-blue-500 outline-none">
                                        <input type="date" id="onWayDateFilter"
                                            class="border-2 rounded-xl px-3 py-2 text-sm font-medium focus:border-blue-500 outline-none">
                                        <button type="button"
                                            onclick="setDeliveryDateFilter(document.getElementById('onWayDateFilter').value)"
                                            class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-xl text-sm font-bold transition-colors">
                                            üîç Filter
                                        </button>
                                        <button type="button"
                                            onclick="clearDeliveryDateFilter(); document.getElementById('onWayDateFilter').value=''"
                                            class="bg-white border border-red-200 text-red-600 px-3 py-2 rounded-xl text-sm font-bold hover:bg-red-50">
                                            ‚úï
                                        </button>
                                        <button type="button" onclick="loadOnWayOrders()"
                                            class="text-blue-600 hover:bg-blue-50 px-4 py-2 rounded-xl text-sm font-bold transition-colors flex items-center gap-2">
                                            üîÑ Refresh
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <div id="onWayOrdersList" class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6">
                            </div>
                        </div>

                        <!-- OFD (Out For Delivery) TAB -->
                        <div id="deliveryOFDTab" class="hidden animate-fadeIn">
                            <div class="bg-white -mx-8 px-8 pb-8 pt-4 shadow-lg mb-0">
                                <div class="flex flex-col md:flex-row justify-between items-center gap-3 px-2">
                                    <h2 class="text-xl font-bold text-gray-800 flex items-center gap-2">
                                        <span class="w-2 h-8 bg-orange-500 rounded-full block"></span>
                                        Out For Delivery (OFD)
                                    </h2>
                                    <div class="flex flex-wrap items-center gap-2">
                                        <input type="text" id="ofdSearchInput"
                                            placeholder="Search by Mobile, Name, or Order ID..."
                                            oninput="filterOFDOrders(this.value)"
                                            class="px-4 py-2 border-2 border-orange-200 rounded-xl text-sm font-medium focus:border-orange-500 outline-none">
                                        <input type="date" id="ofdDateFilter"
                                            class="border-2 rounded-xl px-3 py-2 text-sm font-medium focus:border-orange-500 outline-none">
                                        <button type="button"
                                            onclick="setDeliveryDateFilter(document.getElementById('ofdDateFilter').value)"
                                            class="bg-orange-500 hover:bg-orange-600 text-white px-4 py-2 rounded-xl text-sm font-bold transition-colors">
                                            üîç Filter
                                        </button>
                                        <button type="button"
                                            onclick="clearDeliveryDateFilter(); document.getElementById('ofdDateFilter').value=''"
                                            class="bg-white border border-red-200 text-red-600 px-3 py-2 rounded-xl text-sm font-bold hover:bg-red-50">
                                            ‚úï
                                        </button>
                                        <button type="button" onclick="loadOFDOrders()"
                                            class="text-orange-600 hover:bg-orange-50 px-4 py-2 rounded-xl text-sm font-bold transition-colors flex items-center gap-2">
                                            üîÑ Refresh
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <div id="ofdOrdersList" class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6">
                            </div>
                        </div>

                        <!-- DELIVERED TAB -->
                        <div id="deliveryDeliveredTab" class="hidden animate-fadeIn">
                            <div class="bg-white -mx-8 px-8 pb-8 pt-4 shadow-lg mb-0">
                                <div class="flex flex-col md:flex-row justify-between items-center gap-3 px-2">
                                    <h2 class="text-xl font-bold text-gray-800 flex items-center gap-2">
                                        <span class="w-2 h-8 bg-teal-500 rounded-full block"></span>
                                        Successfully Delivered
                                    </h2>
                                    <div class="flex flex-wrap items-center gap-2">
                                        <input type="text" id="deliveredSearchInput"
                                            placeholder="Search by Mobile, Name, or Order ID..."
                                            oninput="filterDeliveredOrders(this.value)"
                                            class="px-4 py-2 border-2 border-green-200 rounded-xl text-sm font-medium focus:border-green-500 outline-none">
                                        <input type="date" id="deliveredDateFilter"
                                            class="border-2 rounded-xl px-3 py-2 text-sm font-medium focus:border-green-500 outline-none">
                                        <button type="button"
                                            onclick="setDeliveryDateFilter(document.getElementById('deliveredDateFilter').value)"
                                            class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-xl text-sm font-bold transition-colors">
                                            üîç Filter
                                        </button>
                                        <button type="button"
                                            onclick="clearDeliveryDateFilter(); document.getElementById('deliveredDateFilter').value=''"
                                            class="bg-white border border-red-200 text-red-600 px-3 py-2 rounded-xl text-sm font-bold hover:bg-red-50">
                                            ‚úï
                                        </button>
                                        <button type="button" onclick="loadDeliveredOrders()"
                                            class="text-green-600 hover:bg-green-50 px-4 py-2 rounded-xl text-sm font-bold transition-colors flex items-center gap-2">
                                            üîÑ Refresh
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <div id="deliveredOrdersList" class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6">
                            </div>
                        </div>

                        <!-- RTO TAB -->
                        <div id="deliveryRTOTab" class="hidden animate-fadeIn">
                            <div class="bg-white -mx-8 px-8 pb-8 pt-4 shadow-lg mb-0">
                                <div class="flex flex-col md:flex-row justify-between items-center gap-3 px-2">
                                    <h2 class="text-xl font-bold text-gray-800 flex items-center gap-2">
                                        <span class="w-2 h-8 bg-indigo-500 rounded-full block"></span>
                                        Return to Origin (RTO)
                                    </h2>
                                    <div class="flex flex-wrap items-center gap-2">
                                        <input type="text" id="rtoSearchInput"
                                            placeholder="Search by Mobile, Name, or Order ID..."
                                            oninput="filterRTOOrders(this.value)"
                                            class="px-4 py-2 border-2 border-indigo-200 rounded-xl text-sm font-medium focus:border-indigo-500 outline-none">
                                        <input type="date" id="rtoDateFilter"
                                            class="border-2 rounded-xl px-3 py-2 text-sm font-medium focus:border-indigo-500 outline-none">
                                        <button type="button"
                                            onclick="setDeliveryDateFilter(document.getElementById('rtoDateFilter').value)"
                                            class="bg-indigo-500 hover:bg-indigo-600 text-white px-4 py-2 rounded-xl text-sm font-bold transition-colors">
                                            üîç Filter
                                        </button>
                                        <button type="button"
                                            onclick="clearDeliveryDateFilter(); document.getElementById('rtoDateFilter').value=''"
                                            class="bg-white border border-red-200 text-red-600 px-3 py-2 rounded-xl text-sm font-bold hover:bg-red-50">
                                            ‚úï
                                        </button>
                                        <button type="button" onclick="loadRTOOrders()"
                                            class="text-indigo-600 hover:bg-indigo-50 px-4 py-2 rounded-xl text-sm font-bold transition-colors flex items-center gap-2">
                                            üîÑ Refresh
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <div id="rtoOrdersList" class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6">
                            </div>
                        </div>



                    </div>
                </div>
            </div>
        </div>
    </div>

    <!--====================GLOBAL MODALS====================-->
    <!-- Dispatch Modal (Globally Accessible) -->
    <div id="dispatchModal" class="hidden fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50">
        <div class="bg-white rounded-2xl max-w-md w-full">
            <div class="bg-purple-600 text-white p-4 rounded-t-2xl">
                <h3 class="font-bold text-lg">üì¶ Dispatch Order</h3>
            </div>
            <div class="p-6 space-y-4"><input type="hidden" id="dispatchOrderId">
                <div><label class="block text-sm font-medium mb-1">Courier
                        Company</label><select id="dispatchCourier" class="w-full border-2 rounded-xl px-4 py-3">
                        <option value="">-- Select Courier --</option>
                        <option value="India Post">India Post</option>
                        <option value="DTDC">DTDC</option>
                        <option value="Blue Dart">Blue Dart</option>
                        <option value="Delhivery">Delhivery</option>
                        <option value="Ekart">Ekart</option>
                        <option value="Xpressbees">Xpressbees</option>
                        <option value="Ecom Express">Ecom Express</option>
                        <option value="Shadowfax">Shadowfax</option>
                        <option value="Amazon">Amazon</option>
                        <option value="Professional">Professional</option>
                        <option value="Other">Other</option>
                    </select></div>
                <div><label class="block text-sm font-medium mb-1">Tracking
                        ID *</label><input type="text" id="dispatchTrackingId" placeholder="Enter tracking number"
                        class="w-full border-2 rounded-xl px-4 py-3">
                </div>
                <div class="flex gap-3"><button type="button"
                        onclick="document.getElementById('dispatchModal').classList.add('hidden'); document.getElementById('dispatchModal').style.display = 'none';"
                        class="flex-1 bg-gray-200 text-gray-700 py-3 rounded-xl font-medium">Cancel</button><button
                        type="button" onclick="confirmDispatch()"
                        class="flex-1 bg-purple-600 text-white py-3 rounded-xl font-medium hover:bg-purple-700">üöö
                        Dispatch</button></div>
            </div>
        </div>
    </div>

    <!-- Order Detail Modal (Globally Accessible for View Button) -->
    <div id="orderDetailModal"
        class="hidden fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-50 overflow-y-auto">
        <div class="bg-white rounded-3xl max-w-4xl w-full max-h-[95vh] overflow-y-auto shadow-2xl">
            <div id="orderDetailContent">
                <!-- Content will be dynamically loaded by viewOrder() -->
            </div>
        </div>
    </div>

    <!-- Order Modal (Alternative ID for app.js compatibility) -->
    <div id="orderModal"
        class="hidden fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50 overflow-y-auto">
        <div class="bg-white rounded-3xl max-w-4xl w-full max-h-[95vh] overflow-y-auto shadow-2xl">
            <div class="p-6 border-b border-gray-100 flex justify-between items-center">
                <h3 class="text-xl font-bold text-gray-800">üì¶ Order Details</h3>
                <button onclick="closeModal('orderModal')"
                    class="text-gray-400 hover:text-gray-600 p-2 rounded-lg hover:bg-gray-100">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12">
                        </path>
                    </svg>
                </button>
            </div>
            <div id="orderModalContent" class="p-6">
                <!-- Content will be dynamically loaded -->
            </div>
        </div>
    </div>

    <!--====================ADMIN PANEL====================-->
    <!--====================ADMIN PANEL====================-->
    <div id="adminPanel" class="hidden animate-fadeIn">
        <!-- Shiprocket-style Layout: Sidebar + Main -->
        <div class="flex min-h-screen bg-slate-50">

            <!-- LEFT SIDEBAR (Light & Clean) -->
            <aside id="adminSidebar"
                class="w-64 bg-white border-r border-slate-200 flex-shrink-0 flex flex-col fixed left-0 top-0 h-full z-40 transform -translate-x-full lg:translate-x-0 transition-transform duration-300 shadow-lg lg:shadow-none">
                <!-- Logo Header -->
                <div class="p-5 border-b border-slate-100 bg-gradient-to-r from-emerald-50 to-teal-50">
                    <div class="flex items-center gap-3">
                        <div
                            class="w-11 h-11 bg-gradient-to-br from-emerald-500 to-teal-600 rounded-xl flex items-center justify-center p-1.5 shadow-lg shadow-emerald-200">
                            <img src="icon.png" alt="HON" class="w-full h-full object-contain">
                        </div>
                        <div>
                            <h1 class="text-lg font-black tracking-tight text-slate-800">Herb On
                                Naturals</h1>
                            <p class="text-[10px] text-emerald-600 font-semibold -mt-0.5">Admin
                                Dashboard</p>
                        </div>
                    </div>
                </div>

                <!-- Navigation Menu -->
                <nav class="flex-1 py-4 overflow-y-auto">
                    <!-- Orders Section -->
                    <div class="px-3 mb-2">
                        <p class="text-[10px] font-bold text-slate-400 uppercase tracking-wider px-3 mb-2">
                            Orders
                        </p>
                        <button onclick="switchAdminTab('pending')" id="adminTabPending"
                            class="sidebar-nav-item w-full flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm font-medium text-slate-600 hover:bg-slate-100 hover:text-slate-900 transition-all">
                            <span class="text-lg">üìç</span>
                            <span class="flex-1 text-left">Pending</span>
                            <span id="pendingCount"
                                class="bg-red-100 text-red-600 px-2.5 py-0.5 rounded-full text-[10px] font-bold">0</span>
                        </button>
                        <button onclick="switchAdminTab('verified')" id="adminTabVerified"
                            class="sidebar-nav-item w-full flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm font-medium text-slate-600 hover:bg-slate-100 hover:text-slate-900 transition-all">
                            <span class="text-lg">‚úÖ</span>
                            <span class="flex-1 text-left">Verified</span>
                            <span id="verifiedCount"
                                class="bg-blue-100 text-blue-600 px-2.5 py-0.5 rounded-full text-[10px] font-bold">0</span>
                        </button>
                        <button onclick="switchAdminTab('dispatched')" id="adminTabDispatched"
                            class="sidebar-nav-item w-full flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm font-medium text-slate-600 hover:bg-slate-100 hover:text-slate-900 transition-all">
                            <span class="text-lg">üöö</span>
                            <span class="flex-1 text-left">In Transit</span>
                            <span id="dispatchedCount"
                                class="bg-purple-100 text-purple-600 px-2.5 py-0.5 rounded-full text-[10px] font-bold">0</span>
                        </button>
                        <button onclick="switchAdminTab('ofd')" id="adminTabOfd"
                            class="sidebar-nav-item w-full flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm font-medium text-slate-600 hover:bg-slate-100 hover:text-slate-900 transition-all">
                            <span class="text-lg">üì¶</span>
                            <span class="flex-1 text-left">Out For Delivery</span>
                            <span id="ofdCount"
                                class="bg-orange-100 text-orange-600 px-2.5 py-0.5 rounded-full text-[10px] font-bold">0</span>
                        </button>
                        <button onclick="switchAdminTab('delivered')" id="adminTabDelivered"
                            class="sidebar-nav-item w-full flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm font-medium text-slate-600 hover:bg-slate-100 hover:text-slate-900 transition-all">
                            <span class="text-lg">üéâ</span>
                            <span class="flex-1 text-left">Delivered</span>
                            <span id="deliveredCount"
                                class="bg-emerald-100 text-emerald-600 px-2.5 py-0.5 rounded-full text-[10px] font-bold">0</span>
                        </button>
                        <button onclick="switchAdminTab('cancelled')" id="adminTabCancelled"
                            class="sidebar-nav-item w-full flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm font-medium text-slate-600 hover:bg-slate-100 hover:text-slate-900 transition-all">
                            <span class="text-lg">‚ùå</span>
                            <span class="flex-1 text-left">Cancelled</span>
                            <span id="cancelledCount"
                                class="bg-rose-100 text-rose-600 px-2.5 py-0.5 rounded-full text-[10px] font-bold">0</span>
                        </button>
                        <button onclick="switchAdminTab('onhold')" id="adminTabOnhold"
                            class="sidebar-nav-item w-full flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm font-medium text-slate-600 hover:bg-slate-100 hover:text-slate-900 transition-all">
                            <span class="text-lg">‚è∏Ô∏è</span>
                            <span class="flex-1 text-left">On Hold</span>
                            <span id="onholdCount"
                                class="bg-amber-100 text-amber-600 px-2.5 py-0.5 rounded-full text-[10px] font-bold">0</span>
                        </button>
                        <button onclick="switchAdminTab('rto')" id="adminTabRto"
                            class="sidebar-nav-item w-full flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm font-medium text-slate-600 hover:bg-slate-100 hover:text-slate-900 transition-all">
                            <span class="text-lg">‚Ü©Ô∏è</span>
                            <span class="flex-1 text-left">RTO</span>
                            <span id="rtoCount"
                                class="bg-indigo-100 text-indigo-600 px-2.5 py-0.5 rounded-full text-[10px] font-bold">0</span>
                        </button>
                    </div>

                    <!-- Management Section -->
                    <div class="px-3 mb-2">
                        <p class="text-[10px] font-bold text-slate-400 uppercase tracking-wider px-3 mb-2 mt-4">
                            Management</p>
                        <button onclick="switchAdminTab('employees')" id="adminTabEmployees"
                            class="sidebar-nav-item w-full flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm font-medium text-slate-600 hover:bg-slate-100 hover:text-slate-900 transition-all">
                            <span class="text-lg">üë•</span>
                            <span class="flex-1 text-left">Employees</span>
                        </button>
                        <button onclick="switchAdminTab('departments')" id="adminTabDepartments"
                            class="sidebar-nav-item w-full flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm font-medium text-slate-600 hover:bg-slate-100 hover:text-slate-900 transition-all">
                            <span class="text-lg">üè¢</span>
                            <span class="flex-1 text-left">Departments</span>
                        </button>
                    </div>

                    <!-- Analytics Section -->
                    <div class="px-3 mb-2">
                        <p class="text-[10px] font-bold text-slate-400 uppercase tracking-wider px-3 mb-2 mt-4">
                            Analytics</p>
                        <button onclick="switchAdminTab('history')" id="adminTabHistory"
                            class="sidebar-nav-item w-full flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm font-medium text-slate-600 hover:bg-slate-100 hover:text-slate-900 transition-all">
                            <span class="text-lg">üìã</span>
                            <span class="flex-1 text-left">History</span>
                        </button>
                        <button onclick="switchAdminTab('progress')" id="adminTabProgress"
                            class="sidebar-nav-item w-full flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm font-medium text-slate-600 hover:bg-slate-100 hover:text-slate-900 transition-all">
                            <span class="text-lg">üìä</span>
                            <span class="flex-1 text-left">Analytics</span>
                        </button>
                    </div>

                    <!-- Tools Section -->
                    <div class="px-3 mb-2">
                        <p class="text-[10px] font-bold text-slate-400 uppercase tracking-wider px-3 mb-2 mt-4">
                            Tools</p>
                        <button onclick="exportAllOrders()"
                            class="sidebar-nav-item w-full flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm font-medium text-slate-600 hover:bg-blue-50 hover:text-blue-600 transition-all">
                            <span class="text-lg">üì•</span>
                            <span class="flex-1 text-left">Export Data</span>
                        </button>
                    </div>
                </nav>

                <!-- Bottom Actions -->
                <div class="p-4 border-t border-slate-100 bg-slate-50">
                    <button onclick="showRegisterDeptModal()"
                        class="w-full bg-gradient-to-r from-emerald-500 to-teal-600 text-white px-4 py-2.5 rounded-xl text-sm font-bold shadow-lg shadow-emerald-200 hover:shadow-emerald-300 transition-all flex items-center justify-center gap-2 mb-2">
                        <span>‚ûï</span> Register Dept
                    </button>
                    <button onclick="logout()"
                        class="w-full bg-white text-red-500 border border-red-200 px-4 py-2 rounded-xl text-sm font-medium hover:bg-red-50 transition-all flex items-center justify-center gap-2">
                        <span>üö™</span> Logout
                    </button>
                </div>
            </aside>

            <!-- MAIN CONTENT AREA - Scrollable while sidebar stays fixed -->
            <div class="flex-1 lg:ml-64 h-screen flex flex-col overflow-hidden">

                <!-- TOP HEADER -->
                <header class="bg-white/95 backdrop-blur-md border-b border-slate-200 shadow-sm">
                    <div class="px-4 sm:px-6 py-3 flex items-center gap-4">
                        <!-- Mobile Menu Toggle -->
                        <button onclick="toggleAdminSidebar()"
                            class="lg:hidden p-2 rounded-xl hover:bg-slate-100 transition-colors">
                            <svg class="w-6 h-6 text-slate-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M4 6h16M4 12h16M4 18h16" />
                            </svg>
                        </button>

                        <!-- Quick Stats Pills -->
                        <div class="hidden md:flex items-center gap-2 ml-auto">
                            <div
                                class="flex items-center gap-1.5 px-3 py-2 bg-gradient-to-r from-red-50 to-rose-50 border border-red-100 rounded-xl">
                                <span class="w-2 h-2 rounded-full bg-red-500 animate-pulse"></span>
                                <span class="text-xs font-bold text-red-600" id="quickStatPending">0</span>
                                <span class="text-[10px] text-red-400 font-medium">Pending</span>
                            </div>
                            <div
                                class="flex items-center gap-1.5 px-3 py-2 bg-gradient-to-r from-violet-50 to-purple-50 border border-purple-100 rounded-xl">
                                <span class="w-2 h-2 rounded-full bg-purple-500"></span>
                                <span class="text-xs font-bold text-purple-600" id="quickStatDispatched">0</span>
                                <span class="text-[10px] text-purple-400 font-medium">Transit</span>
                            </div>
                            <div
                                class="flex items-center gap-1.5 px-3 py-2 bg-gradient-to-r from-emerald-50 to-teal-50 border border-emerald-100 rounded-xl">
                                <span class="w-2 h-2 rounded-full bg-emerald-500"></span>
                                <span class="text-xs font-bold text-emerald-600" id="quickStatDelivered">0</span>
                                <span class="text-[10px] text-emerald-400 font-medium">Delivered</span>
                            </div>
                        </div>

                        <!-- User Menu -->
                        <div class="flex items-center gap-2 pl-3 border-l border-slate-200">
                            <div class="hidden sm:block text-right">
                                <p class="text-sm font-bold text-slate-800">Admin</p>
                                <p
                                    class="text-[10px] text-emerald-500 font-semibold flex items-center justify-end gap-1">
                                    <span class="w-1.5 h-1.5 bg-emerald-500 rounded-full animate-pulse"></span>
                                    Online
                                </p>
                            </div>
                            <div
                                class="w-10 h-10 bg-gradient-to-br from-emerald-500 to-teal-600 rounded-xl flex items-center justify-center text-white font-bold text-sm shadow-lg shadow-emerald-200">
                                A
                            </div>
                        </div>
                    </div>
                </header>

                <!-- Scrollable Content Area -->
                <div class="flex-1 overflow-y-auto p-4 sm:p-6">
                    <div id="adminMessage" class="hidden mb-6 p-4 rounded-xl text-sm glass-card border-l-4">
                    </div>

                    <!-- PENDING TAB -->
                    <div id="adminPendingTab" class="hidden animate-fadeIn">
                        <!-- Stats & Filters Bar -->
                        <div class="bg-slate-50 -mx-4 sm:-mx-6 px-4 sm:px-6 py-2 mb-3 border-b border-slate-200">
                            <!-- Stats Row - Compact Horizontal -->
                            <div class="flex flex-wrap items-center gap-2 mb-2">
                                <button onclick="applyQuickDateFilter('adminPending', 'today')"
                                    class="flex items-center gap-3 px-4 py-2.5 bg-white border-2 border-red-200 hover:border-red-400 rounded-xl transition-all group cursor-pointer">
                                    <div class="w-2 h-2 bg-red-500 rounded-full animate-pulse"></div>
                                    <div>
                                        <p
                                            class="text-[10px] font-bold text-red-400 uppercase tracking-wider leading-none">
                                            Total</p>
                                        <p class="text-xl font-black text-slate-800 leading-tight"
                                            id="statsAdminPendingToday">0</p>
                                    </div>
                                </button>
                                <button onclick="applyQuickDateFilter('adminPending', 'yesterday')"
                                    class="flex items-center gap-3 px-4 py-2.5 bg-white border border-slate-200 hover:border-amber-400 rounded-xl transition-all">
                                    <div class="w-2 h-2 bg-amber-400 rounded-full"></div>
                                    <div>
                                        <p
                                            class="text-[10px] font-bold text-slate-400 uppercase tracking-wider leading-none">
                                            Yesterday</p>
                                        <p class="text-xl font-black text-slate-800 leading-tight"
                                            id="statsAdminPendingYesterday">0</p>
                                    </div>
                                </button>
                                <button onclick="applyQuickDateFilter('adminPending', 'week')"
                                    class="flex items-center gap-3 px-4 py-2.5 bg-white border border-slate-200 hover:border-blue-400 rounded-xl transition-all">
                                    <div class="w-2 h-2 bg-blue-400 rounded-full"></div>
                                    <div>
                                        <p
                                            class="text-[10px] font-bold text-slate-400 uppercase tracking-wider leading-none">
                                            This Week</p>
                                        <p class="text-xl font-black text-slate-800 leading-tight"
                                            id="statsAdminPendingWeek">0</p>
                                    </div>
                                </button>
                            </div>

                            <!-- Filters Row - Inline -->
                            <div class="flex flex-wrap items-center gap-3">
                                <div class="relative flex-1 min-w-[180px] max-w-[250px]">
                                    <svg class="absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"
                                        fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                                    </svg>
                                    <input type="text" id="adminPendingSearch" placeholder="Search..."
                                        class="w-full pl-9 pr-3 py-2 bg-white border border-slate-200 rounded-lg text-sm focus:border-red-400 focus:ring-2 focus:ring-red-100 outline-none transition-all"
                                        oninput="loadAdminPending()">
                                </div>
                                <div class="flex items-center gap-2">
                                    <span class="text-xs text-slate-400 font-medium">From</span>
                                    <input type="date" id="adminPendingStartDate"
                                        class="px-3 py-2 bg-white border border-slate-200 rounded-lg text-sm focus:border-red-400 outline-none"
                                        onchange="loadAdminPending()">
                                </div>
                                <div class="flex items-center gap-2">
                                    <span class="text-xs text-slate-400 font-medium">To</span>
                                    <input type="date" id="adminPendingEndDate"
                                        class="px-3 py-2 bg-white border border-slate-200 rounded-lg text-sm focus:border-red-400 outline-none"
                                        onchange="loadAdminPending()">
                                </div>
                                <button onclick="resetAdminFilters('pending')"
                                    class="px-4 py-2 bg-red-50 text-red-500 font-semibold rounded-lg text-sm hover:bg-red-100 transition-colors flex items-center gap-1">
                                    <span>‚úï</span> Clear
                                </button>
                                <button onclick="exportOrdersByStatus('Pending')"
                                    class="px-4 py-2 bg-emerald-600 text-white font-bold rounded-lg text-sm hover:bg-emerald-700 transition-colors flex items-center gap-2">
                                    <span>üì•</span> Export
                                </button>
                            </div>
                        </div>

                        <div id="adminPendingList" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        </div>
                    </div>

                    <!-- VERIFIED TAB -->
                    <div id="adminVerifiedTab" class="hidden animate-fadeIn">
                        <!-- Sticky Stats & Filters Bar -->
                        <div class="bg-slate-50 -mx-4 sm:-mx-6 px-4 sm:px-6 py-2 mb-3 border-b border-slate-200">
                            <!-- Stats Row -->
                            <div class="flex flex-wrap items-center gap-2 mb-2">
                                <button onclick="applyQuickDateFilter('adminVerified', 'today')"
                                    class="flex items-center gap-3 px-4 py-2 bg-white border-2 border-blue-200 hover:border-blue-400 rounded-xl transition-all">
                                    <div class="w-2 h-2 bg-blue-500 rounded-full"></div>
                                    <div>
                                        <p class="text-[10px] font-bold text-blue-400 uppercase leading-none">
                                            Total
                                        </p>
                                        <p class="text-xl font-black text-slate-800 leading-tight"
                                            id="statsAdminVerifiedToday">0</p>
                                    </div>
                                </button>
                                <button onclick="applyQuickDateFilter('adminVerified', 'yesterday')"
                                    class="flex items-center gap-3 px-4 py-2 bg-white border border-slate-200 hover:border-amber-400 rounded-xl transition-all">
                                    <div class="w-2 h-2 bg-amber-400 rounded-full"></div>
                                    <div>
                                        <p class="text-[10px] font-bold text-slate-400 uppercase leading-none">
                                            Yesterday</p>
                                        <p class="text-xl font-black text-slate-800 leading-tight"
                                            id="statsAdminVerifiedYesterday">0</p>
                                    </div>
                                </button>
                                <button onclick="applyQuickDateFilter('adminVerified', 'week')"
                                    class="flex items-center gap-3 px-4 py-2 bg-white border border-slate-200 hover:border-blue-400 rounded-xl transition-all">
                                    <div class="w-2 h-2 bg-blue-400 rounded-full"></div>
                                    <div>
                                        <p class="text-[10px] font-bold text-slate-400 uppercase leading-none">
                                            This
                                            Week</p>
                                        <p class="text-xl font-black text-slate-800 leading-tight"
                                            id="statsAdminVerifiedWeek">0</p>
                                    </div>
                                </button>
                            </div>
                            <!-- Filters Row -->
                            <div class="flex flex-wrap items-center gap-2">
                                <div class="relative flex-1 min-w-[150px] max-w-[200px]">
                                    <svg class="absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"
                                        fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                                    </svg>
                                    <input type="text" id="adminVerifiedSearch" placeholder="Search..."
                                        class="w-full pl-9 pr-3 py-2 bg-white border border-slate-200 rounded-lg text-sm focus:border-blue-400 outline-none"
                                        oninput="loadAdminVerified()">
                                </div>
                                <div class="flex items-center gap-2">
                                    <span class="text-xs text-slate-400">From</span>
                                    <input type="date" id="adminVerifiedStartDate"
                                        class="px-3 py-2 bg-white border border-slate-200 rounded-lg text-sm focus:border-blue-400 outline-none"
                                        onchange="loadAdminVerified()">
                                </div>
                                <div class="flex items-center gap-2">
                                    <span class="text-xs text-slate-400">To</span>
                                    <input type="date" id="adminVerifiedEndDate"
                                        class="px-3 py-2 bg-white border border-slate-200 rounded-lg text-sm focus:border-blue-400 outline-none"
                                        onchange="loadAdminVerified()">
                                </div>
                                <button onclick="resetAdminFilters('verified')"
                                    class="px-3 py-2 bg-blue-50 text-blue-500 font-semibold rounded-lg text-sm hover:bg-blue-100">
                                    ‚úï Clear
                                </button>
                                <button onclick="exportOrdersByStatus('Address Verified')"
                                    class="px-4 py-2 bg-emerald-600 text-white font-bold rounded-lg text-sm hover:bg-emerald-700 transition-colors flex items-center gap-2">
                                    <span>üì•</span> Export
                                </button>
                            </div>
                        </div>

                        <div id="adminVerifiedList" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        </div>
                    </div>

                    <!-- DISPATCHED TAB -->
                    <div id="adminDispatchedTab" class="hidden animate-fadeIn">
                        <!-- Sticky Stats & Filters Bar -->
                        <div class="bg-slate-50 -mx-4 sm:-mx-6 px-4 sm:px-6 py-2 mb-3 border-b border-slate-200">
                            <!-- Stats Row -->
                            <div class="flex flex-wrap items-center gap-2 mb-2">
                                <button onclick="applyQuickDateFilter('adminDispatched', 'today')"
                                    class="flex items-center gap-3 px-4 py-2 bg-white border-2 border-purple-200 hover:border-purple-400 rounded-xl transition-all">
                                    <div class="w-2 h-2 bg-purple-500 rounded-full"></div>
                                    <div>
                                        <p class="text-[10px] font-bold text-purple-400 uppercase leading-none">
                                            Total</p>
                                        <p class="text-xl font-black text-slate-800 leading-tight"
                                            id="statsAdminDispatchedToday">0</p>
                                    </div>
                                </button>
                                <button onclick="applyQuickDateFilter('adminDispatched', 'yesterday')"
                                    class="flex items-center gap-3 px-4 py-2 bg-white border border-slate-200 hover:border-amber-400 rounded-xl transition-all">
                                    <div class="w-2 h-2 bg-amber-400 rounded-full"></div>
                                    <div>
                                        <p class="text-[10px] font-bold text-slate-400 uppercase leading-none">
                                            Yesterday</p>
                                        <p class="text-xl font-black text-slate-800 leading-tight"
                                            id="statsAdminDispatchedYesterday">0</p>
                                    </div>
                                </button>
                                <button onclick="applyQuickDateFilter('adminDispatched', 'week')"
                                    class="flex items-center gap-3 px-4 py-2 bg-white border border-slate-200 hover:border-purple-400 rounded-xl transition-all">
                                    <div class="w-2 h-2 bg-purple-400 rounded-full"></div>
                                    <div>
                                        <p class="text-[10px] font-bold text-slate-400 uppercase leading-none">
                                            This
                                            Week</p>
                                        <p class="text-xl font-black text-slate-800 leading-tight"
                                            id="statsAdminDispatchedWeek">0</p>
                                    </div>
                                </button>
                            </div>
                            <!-- Filters Row -->
                            <div class="flex flex-wrap items-center gap-2">
                                <div class="relative flex-1 min-w-[150px] max-w-[200px]">
                                    <svg class="absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"
                                        fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                                    </svg>
                                    <input type="text" id="adminDispatchedSearch" placeholder="Search..."
                                        class="w-full pl-9 pr-3 py-2 bg-white border border-slate-200 rounded-lg text-sm focus:border-purple-400 outline-none"
                                        oninput="loadAdminDispatched()">
                                </div>
                                <div class="flex items-center gap-2">
                                    <span class="text-xs text-slate-400">From</span>
                                    <input type="date" id="adminDispatchedStartDate"
                                        class="px-3 py-2 bg-white border border-slate-200 rounded-lg text-sm focus:border-purple-400 outline-none"
                                        onchange="loadAdminDispatched()">
                                </div>
                                <div class="flex items-center gap-2">
                                    <span class="text-xs text-slate-400">To</span>
                                    <input type="date" id="adminDispatchedEndDate"
                                        class="px-3 py-2 bg-white border border-slate-200 rounded-lg text-sm focus:border-purple-400 outline-none"
                                        onchange="loadAdminDispatched()">
                                </div>
                                <button onclick="resetAdminFilters('dispatched')"
                                    class="px-3 py-2 bg-purple-50 text-purple-500 font-semibold rounded-lg text-sm hover:bg-purple-100">
                                    ‚úï Clear
                                </button>
                                <button onclick="exportOrdersByStatus('Dispatched')"
                                    class="px-4 py-2 bg-emerald-600 text-white font-bold rounded-lg text-sm hover:bg-emerald-700 transition-colors flex items-center gap-2">
                                    <span>üì•</span> Export
                                </button>
                            </div>
                        </div>

                        <div id="adminDispatchedList" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        </div>
                    </div>

                    <!-- DELIVERED TAB -->
                    <div id="adminDeliveredTab" class="hidden animate-fadeIn">
                        <!-- Sticky Stats & Filters Bar -->
                        <div class="bg-slate-50 -mx-4 sm:-mx-6 px-4 sm:px-6 py-2 mb-3 border-b border-slate-200">
                            <!-- Stats Row -->
                            <div class="flex flex-wrap items-center gap-2 mb-2">
                                <button onclick="applyQuickDateFilter('adminDelivered', 'today')"
                                    class="flex items-center gap-3 px-4 py-2 bg-white border-2 border-emerald-200 hover:border-emerald-400 rounded-xl transition-all">
                                    <div class="w-2 h-2 bg-emerald-500 rounded-full"></div>
                                    <div>
                                        <p class="text-[10px] font-bold text-emerald-400 uppercase leading-none">
                                            Total</p>
                                        <p class="text-xl font-black text-slate-800 leading-tight"
                                            id="statsAdminDeliveredToday">0</p>
                                    </div>
                                </button>
                                <button onclick="applyQuickDateFilter('adminDelivered', 'yesterday')"
                                    class="flex items-center gap-3 px-4 py-2 bg-white border border-slate-200 hover:border-amber-400 rounded-xl transition-all">
                                    <div class="w-2 h-2 bg-amber-400 rounded-full"></div>
                                    <div>
                                        <p class="text-[10px] font-bold text-slate-400 uppercase leading-none">
                                            Yesterday</p>
                                        <p class="text-xl font-black text-slate-800 leading-tight"
                                            id="statsAdminDeliveredYesterday">0</p>
                                    </div>
                                </button>
                                <button onclick="applyQuickDateFilter('adminDelivered', 'week')"
                                    class="flex items-center gap-3 px-4 py-2 bg-white border border-slate-200 hover:border-emerald-400 rounded-xl transition-all">
                                    <div class="w-2 h-2 bg-emerald-400 rounded-full"></div>
                                    <div>
                                        <p class="text-[10px] font-bold text-slate-400 uppercase leading-none">
                                            This
                                            Week</p>
                                        <p class="text-xl font-black text-slate-800 leading-tight"
                                            id="statsAdminDeliveredWeek">0</p>
                                    </div>
                                </button>
                            </div>
                            <!-- Filters Row -->
                            <div class="flex flex-wrap items-center gap-2">
                                <div class="relative flex-1 min-w-[150px] max-w-[200px]">
                                    <svg class="absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"
                                        fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                                    </svg>
                                    <input type="text" id="adminDeliveredSearch" placeholder="Search..."
                                        class="w-full pl-9 pr-3 py-2 bg-white border border-slate-200 rounded-lg text-sm focus:border-emerald-400 outline-none"
                                        oninput="loadAdminDelivered()">
                                </div>
                                <div class="flex items-center gap-2">
                                    <span class="text-xs text-slate-400">From</span>
                                    <input type="date" id="adminDeliveredStartDate"
                                        class="px-3 py-2 bg-white border border-slate-200 rounded-lg text-sm focus:border-emerald-400 outline-none"
                                        onchange="loadAdminDelivered()">
                                </div>
                                <div class="flex items-center gap-2">
                                    <span class="text-xs text-slate-400">To</span>
                                    <input type="date" id="adminDeliveredEndDate"
                                        class="px-3 py-2 bg-white border border-slate-200 rounded-lg text-sm focus:border-emerald-400 outline-none"
                                        onchange="loadAdminDelivered()">
                                </div>
                                <button onclick="resetAdminFilters('delivered')"
                                    class="px-3 py-2 bg-emerald-50 text-emerald-500 font-semibold rounded-lg text-sm hover:bg-emerald-100">
                                    ‚úï Clear
                                </button>
                                <button onclick="exportOrdersByStatus('Delivered')"
                                    class="px-4 py-2 bg-emerald-600 text-white font-bold rounded-lg text-sm hover:bg-emerald-700 transition-colors flex items-center gap-2">
                                    <span>üì•</span> Export
                                </button>
                            </div>
                        </div>

                        <div id="adminDeliveredList" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        </div>
                    </div>

                    <!-- OUT FOR DELIVERY (OFD) TAB -->
                    <div id="adminOfdTab" class="hidden animate-fadeIn">
                        <!-- Sticky Filters Bar -->
                        <div class="bg-slate-50 -mx-4 sm:-mx-6 px-4 sm:px-6 py-2 mb-3 border-b border-slate-200">
                            <div class="flex flex-wrap items-center justify-between gap-3 mb-2">
                                <h2 class="text-lg font-bold text-slate-800 flex items-center gap-2">
                                    <span class="w-3 h-3 bg-orange-500 rounded-full"></span> Out For
                                    Delivery
                                    (OFD)
                                </h2>
                                <button onclick="loadAdminOFD()"
                                    class="px-4 py-2 rounded-lg text-sm font-bold bg-orange-50 text-orange-600 hover:bg-orange-100 transition-colors">
                                    üîÑ Refresh
                                </button>
                            </div>
                            <!-- Filters Row -->
                            <div class="flex flex-wrap items-center gap-2">
                                <div class="relative flex-1 min-w-[150px] max-w-[200px]">
                                    <svg class="absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"
                                        fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                                    </svg>
                                    <input type="text" id="adminOfdSearch" placeholder="Search..."
                                        class="w-full pl-9 pr-3 py-2 bg-white border border-slate-200 rounded-lg text-sm focus:border-orange-400 outline-none"
                                        oninput="loadAdminOFD()">
                                </div>
                                <div class="flex items-center gap-2">
                                    <span class="text-xs text-slate-400">From</span>
                                    <input type="date" id="adminOfdStartDate"
                                        class="px-3 py-2 bg-white border border-slate-200 rounded-lg text-sm focus:border-orange-400 outline-none"
                                        onchange="loadAdminOFD()">
                                </div>
                                <div class="flex items-center gap-2">
                                    <span class="text-xs text-slate-400">To</span>
                                    <input type="date" id="adminOfdEndDate"
                                        class="px-3 py-2 bg-white border border-slate-200 rounded-lg text-sm focus:border-orange-400 outline-none"
                                        onchange="loadAdminOFD()">
                                </div>
                                <button onclick="resetAdminFilters('ofd')"
                                    class="px-3 py-2 bg-orange-50 text-orange-600 font-semibold rounded-lg text-sm hover:bg-orange-100">
                                    ‚úï Clear
                                </button>
                                <button onclick="exportOrdersByStatus('Out For Delivery')"
                                    class="px-4 py-2 bg-emerald-600 text-white font-bold rounded-lg text-sm hover:bg-emerald-700 transition-colors flex items-center gap-2">
                                    <span>üì•</span> Export
                                </button>
                            </div>
                        </div>
                        <div id="adminOfdList" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        </div>
                    </div>

                    <!-- CANCELLED TAB -->
                    <div id="adminCancelledTab" class="hidden animate-fadeIn">
                        <!-- Sticky Filters Bar -->
                        <div class="bg-slate-50 -mx-4 sm:-mx-6 px-4 sm:px-6 py-2 mb-3 border-b border-slate-200">
                            <div class="flex flex-wrap items-center justify-between gap-3 mb-2">
                                <h2 class="text-lg font-bold text-slate-800 flex items-center gap-2">
                                    <span class="w-3 h-3 bg-red-500 rounded-full"></span> Cancelled
                                    Orders
                                </h2>
                                <button onclick="loadAdminCancelled()"
                                    class="px-4 py-2 rounded-lg text-sm font-bold bg-red-50 text-red-500 hover:bg-red-100 transition-colors">
                                    üîÑ Refresh
                                </button>
                            </div>
                            <!-- Filters Row -->
                            <div class="flex flex-wrap items-center gap-2">
                                <div class="relative flex-1 min-w-[150px] max-w-[200px]">
                                    <svg class="absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"
                                        fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                                    </svg>
                                    <input type="text" id="adminCancelledSearch" placeholder="Search..."
                                        class="w-full pl-9 pr-3 py-2 bg-white border border-slate-200 rounded-lg text-sm focus:border-red-400 outline-none"
                                        oninput="loadAdminCancelled()">
                                </div>
                                <div class="flex items-center gap-2">
                                    <span class="text-xs text-slate-400">From</span>
                                    <input type="date" id="adminCancelledStartDate"
                                        class="px-3 py-2 bg-white border border-slate-200 rounded-lg text-sm focus:border-red-400 outline-none"
                                        onchange="loadAdminCancelled()">
                                </div>
                                <div class="flex items-center gap-2">
                                    <span class="text-xs text-slate-400">To</span>
                                    <input type="date" id="adminCancelledEndDate"
                                        class="px-3 py-2 bg-white border border-slate-200 rounded-lg text-sm focus:border-red-400 outline-none"
                                        onchange="loadAdminCancelled()">
                                </div>
                                <button onclick="resetAdminFilters('cancelled')"
                                    class="px-3 py-2 bg-red-50 text-red-500 font-semibold rounded-lg text-sm hover:bg-red-100">
                                    ‚úï Clear
                                </button>
                                <button onclick="exportOrdersByStatus('Cancelled')"
                                    class="px-4 py-2 bg-emerald-600 text-white font-bold rounded-lg text-sm hover:bg-emerald-700 transition-colors flex items-center gap-2">
                                    <span>üì•</span> Export
                                </button>
                            </div>
                        </div>
                        <div id="adminCancelledList" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        </div>
                    </div>

                    <!-- ON HOLD TAB -->
                    <div id="adminOnholdTab" class="hidden animate-fadeIn">
                        <!-- Sticky Filters Bar -->
                        <div class="bg-slate-50 -mx-4 sm:-mx-6 px-4 sm:px-6 py-2 mb-3 border-b border-slate-200">
                            <div class="flex flex-wrap items-center justify-between gap-3 mb-2">
                                <h2 class="text-lg font-bold text-slate-800 flex items-center gap-2">
                                    <span class="w-3 h-3 bg-amber-500 rounded-full"></span> On Hold
                                    Orders
                                </h2>
                                <button onclick="loadAdminOnHold()"
                                    class="px-4 py-2 rounded-lg text-sm font-bold bg-amber-50 text-amber-600 hover:bg-amber-100 transition-colors">
                                    üîÑ Refresh
                                </button>
                            </div>
                            <!-- Filters Row -->
                            <div class="flex flex-wrap items-center gap-2">
                                <div class="relative flex-1 min-w-[150px] max-w-[200px]">
                                    <svg class="absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"
                                        fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                                    </svg>
                                    <input type="text" id="adminOnholdSearch" placeholder="Search..."
                                        class="w-full pl-9 pr-3 py-2 bg-white border border-slate-200 rounded-lg text-sm focus:border-amber-400 outline-none"
                                        oninput="loadAdminOnHold()">
                                </div>
                                <div class="flex items-center gap-2">
                                    <span class="text-xs text-slate-400">From</span>
                                    <input type="date" id="adminOnholdStartDate"
                                        class="px-3 py-2 bg-white border border-slate-200 rounded-lg text-sm focus:border-amber-400 outline-none"
                                        onchange="loadAdminOnHold()">
                                </div>
                                <div class="flex items-center gap-2">
                                    <span class="text-xs text-slate-400">To</span>
                                    <input type="date" id="adminOnholdEndDate"
                                        class="px-3 py-2 bg-white border border-slate-200 rounded-lg text-sm focus:border-amber-400 outline-none"
                                        onchange="loadAdminOnHold()">
                                </div>
                                <button onclick="resetAdminFilters('onhold')"
                                    class="px-3 py-2 bg-amber-50 text-amber-600 font-semibold rounded-lg text-sm hover:bg-amber-100">
                                    ‚úï Clear
                                </button>
                                <button onclick="exportOrdersByStatus('On Hold')"
                                    class="px-4 py-2 bg-emerald-600 text-white font-bold rounded-lg text-sm hover:bg-emerald-700 transition-colors flex items-center gap-2">
                                    <span>üì•</span> Export
                                </button>
                            </div>
                        </div>
                        <div id="adminOnholdList" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        </div>
                    </div>

                    <!-- RTO TAB -->
                    <div id="adminRTOTab" class="hidden animate-fadeIn">
                        <!-- Sticky Filters Bar -->
                        <div class="bg-slate-50 -mx-4 sm:-mx-6 px-4 sm:px-6 py-2 mb-3 border-b border-slate-200">
                            <div class="flex flex-wrap items-center justify-between gap-3 mb-2">
                                <h2 class="text-lg font-bold text-slate-800 flex items-center gap-2">
                                    <span class="w-3 h-3 bg-indigo-500 rounded-full"></span> RTO
                                    Orders
                                </h2>
                                <button onclick="loadRTOOrders()"
                                    class="px-4 py-2 rounded-lg text-sm font-bold bg-indigo-50 text-indigo-600 hover:bg-indigo-100 transition-colors">
                                    üîÑ Refresh
                                </button>
                            </div>
                            <!-- Filters Row -->
                            <div class="flex flex-wrap items-center gap-2">
                                <div class="relative flex-1 min-w-[150px] max-w-[200px]">
                                    <svg class="absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"
                                        fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                                    </svg>
                                    <input type="text" id="adminRTOSearch" placeholder="Search..."
                                        class="w-full pl-9 pr-3 py-2 bg-white border border-slate-200 rounded-lg text-sm focus:border-indigo-400 outline-none"
                                        oninput="loadRTOOrders()">
                                </div>
                                <div class="flex items-center gap-2">
                                    <span class="text-xs text-slate-400">From</span>
                                    <input type="date" id="adminRTOStartDate"
                                        class="px-3 py-2 bg-white border border-slate-200 rounded-lg text-sm focus:border-indigo-400 outline-none"
                                        onchange="loadRTOOrders()">
                                </div>
                                <div class="flex items-center gap-2">
                                    <span class="text-xs text-slate-400">To</span>
                                    <input type="date" id="adminRTOEndDate"
                                        class="px-3 py-2 bg-white border border-slate-200 rounded-lg text-sm focus:border-indigo-400 outline-none"
                                        onchange="loadRTOOrders()">
                                </div>
                                <button onclick="resetAdminFilters('rto')"
                                    class="px-3 py-2 bg-indigo-50 text-indigo-600 font-semibold rounded-lg text-sm hover:bg-indigo-100">
                                    ‚úï Clear
                                </button>
                                <button onclick="exportOrdersByStatus('RTO')"
                                    class="px-4 py-2 bg-emerald-600 text-white font-bold rounded-lg text-sm hover:bg-emerald-700 transition-colors flex items-center gap-2">
                                    <span>üì•</span> Export
                                </button>
                            </div>
                        </div>
                        <div id="rtoOrdersListAdmin" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        </div>
                    </div>

                    <!-- OTHER TABS -->
                    <div id="adminEmployeesTab" class="hidden animate-fadeIn space-y-6"></div>
                    <div id="adminDepartmentsTab" class="hidden animate-fadeIn space-y-6"></div>
                    <div id="adminHistoryTab" class="hidden animate-fadeIn space-y-6"></div>

                    <!-- PROGRESS TAB -->
                    <div id="adminProgressTab" class="hidden animate-fadeIn space-y-8">
                        <div class="glass-card p-6">
                            <div class="flex justify-between items-center mb-6">
                                <h2 class="text-2xl font-black text-gray-800 flex items-center gap-3">
                                    <span class="text-3xl">üìä</span> Admin Progress Report
                                </h2>
                            </div>

                            <div class="grid grid-cols-1 md:grid-cols-4 gap-4 items-end mb-8">
                                <div>
                                    <label class="block text-xs font-bold text-gray-500 mb-1 uppercase">From</label>
                                    <input type="date" id="adminProgressStartDate"
                                        class="w-full border-2 rounded-xl px-4 py-2.5 text-sm outline-none focus:border-blue-500">
                                </div>
                                <div>
                                    <label class="block text-xs font-bold text-gray-500 mb-1 uppercase">To</label>
                                    <input type="date" id="adminProgressEndDate"
                                        class="w-full border-2 rounded-xl px-4 py-2.5 text-sm outline-none focus:border-blue-500">
                                </div>
                                <div>
                                    <label class="block text-xs font-bold text-gray-500 mb-1 uppercase">Employee</label>
                                    <select id="adminProgressEmployee"
                                        class="w-full border-2 rounded-xl px-4 py-2.5 text-sm outline-none focus:border-blue-500 bg-white">
                                        <option value="">All Employees</option>
                                    </select>
                                </div>
                                <div>
                                    <button onclick="loadAdminProgress()"
                                        class="w-full bg-blue-500 text-white font-bold py-2.5 rounded-xl text-sm hover:bg-blue-600 shadow-lg shadow-blue-200 transition-all">
                                        üîç Generate Report
                                    </button>
                                </div>
                            </div>

                            <div id="adminProgressStats" class="grid grid-cols-2 md:grid-cols-4 gap-6 mb-8">
                            </div>
                            <div id="adminProgressChart" class="mb-8"></div>
                            <div id="adminProgressTable"></div>
                        </div>
                    </div>
                </div>
                <!-- END Scrollable Content Area -->
            </div>
            <!-- END MAIN CONTENT AREA -->
            <!--====================MODALS====================-->
            <!-- Order Details Modal -->
            <div id="orderModal" class="hidden fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50">
                <div class="bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto">
                    <div
                        class="sticky top-0 bg-emerald-600 text-white p-4 rounded-t-2xl flex justify-between items-center">
                        <h3 class="font-bold text-lg">üìã Order Details</h3><button type="button"
                            onclick="closeModal('orderModal')"
                            class="text-2xl hover:bg-white/20 w-8 h-8 rounded-full">√ó</button>
                    </div>
                    <div id="orderModalContent" class="p-6"></div>
                </div>
            </div>
            <!-- Edit Order Modal -->
            <div id="editOrderModal" class="hidden fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50">
                <div class="bg-white rounded-2xl max-w-3xl w-full max-h-[90vh] overflow-y-auto">
                    <div
                        class="sticky top-0 bg-orange-600 text-white p-4 rounded-t-2xl flex justify-between items-center">
                        <h3 class="font-bold text-lg">‚úèÔ∏è Edit Order - <span id="editOrderIdDisplay"></span>
                        </h3>
                        <button type="button" onclick="closeModal('editOrderModal')"
                            class="text-2xl hover:bg-white/20 w-8 h-8 rounded-full">√ó</button>
                    </div>
                    <div id="editOrderModalContent" class="p-6"></div>
                </div>
            </div>
        </div>
        <!-- Register Department Modal -->
        <div id="registerDeptModal" class="hidden fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50">
            <div class="bg-white rounded-2xl max-w-md w-full">
                <div class="bg-indigo-600 text-white p-4 rounded-t-2xl">
                    <h3 class="font-bold text-lg">‚ûï Register Department</h3>
                </div>
                <div class="p-6 space-y-4">
                    <div><label class="block text-sm font-medium mb-1">Department
                            Name</label><input type="text" id="newDeptName" placeholder="e.g., Address Team"
                            class="w-full border-2 rounded-xl px-4 py-3">
                    </div>
                    <div><label class="block text-sm font-medium mb-1">Department
                            ID</label><input type="text" id="newDeptId" placeholder="e.g., ADDR001"
                            class="w-full border-2 rounded-xl px-4 py-3">
                    </div>
                    <div><label class="block text-sm font-medium mb-1">Password</label><input type="password"
                            id="newDeptPass" class="w-full border-2 rounded-xl px-4 py-3">
                    </div>
                    <div><label class="block text-sm font-medium mb-1">Department
                            Type</label><select id="newDeptType" class="w-full border-2 rounded-xl px-4 py-3">
                            <option value="verification">üìç Verification
                                Department</option>
                            <option value="dispatch">üì¶ Dispatch Department
                            </option>
                            <option value="delivery">üöö Delivery Department
                            </option>
                        </select></div>
                    <div class="flex gap-3"><button type="button" onclick="closeModal('registerDeptModal')"
                            class="flex-1 bg-gray-200 text-gray-700 py-3 rounded-xl font-medium">Cancel</button><button
                            type="button" onclick="registerDepartment()"
                            class="flex-1 bg-indigo-600 text-white py-3 rounded-xl font-medium hover:bg-indigo-700">‚úÖ
                            Register</button></div>
                </div>
            </div>
        </div>
        <!-- Edit Department Modal (Full Edit) -->
        <div id="editDeptModal" class="hidden fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]">
            <div class="bg-white rounded-2xl max-w-md w-full">
                <div class="bg-orange-600 text-white p-4 rounded-t-2xl flex justify-between items-center">
                    <h3 class="font-bold text-lg">‚úèÔ∏è Full Edit
                        Department</h3><button type="button" onclick="closeModal('editDeptModal')"
                        class="text-2xl hover:bg-white/20 w-8 h-8 rounded-full">√ó</button>
                </div>
                <div class="p-6 space-y-4"><input type="hidden" id="editDeptOldId">
                    <div class="bg-yellow-50 border border-yellow-300 rounded-xl p-3 text-sm text-yellow-800">
                        ‚ö†Ô∏è <strong>Warning:</strong>ID change karne se
                        purani ID delete ho jayegi aur nayi ban jayegi !
                    </div>
                    <div><label class="block text-sm font-medium mb-1">Department
                            ID *</label><input type="text" id="editDeptNewId" placeholder="e.g., ADDR001"
                            class="w-full border-2 rounded-xl px-4 py-3 font-mono">
                        <p class="text-xs text-gray-500 mt-1">Current ID
                            shown above. Change if needed.</p>
                    </div>
                    <div><label class="block text-sm font-medium mb-1">Department
                            Name *</label><input type="text" id="editDeptName" placeholder="e.g., Verification Team"
                            class="w-full border-2 rounded-xl px-4 py-3">
                    </div>
                    <div><label class="block text-sm font-medium mb-1">Password
                            *</label><input type="password" id="editDeptPass" placeholder="Enter new password"
                            class="w-full border-2 rounded-xl px-4 py-3">
                        <p class="text-xs text-gray-500 mt-1">New
                            password set hoga</p>
                    </div>
                    <div><label class="block text-sm font-medium mb-1">Department
                            Type *</label><select id="editDeptType" class="w-full border-2 rounded-xl px-4 py-3">
                            <option value="verification">üìç Verification
                                Department</option>
                            <option value="dispatch">üì¶ Dispatch
                                Department</option>
                            <option value="delivery">üöö Delivery
                                Department</option>
                        </select></div>
                    <div class="flex gap-3 pt-2"><button type="button" onclick="closeModal('editDeptModal')"
                            class="flex-1 bg-gray-200 text-gray-700 py-3 rounded-xl font-medium">Cancel</button><button
                            type="button" onclick="deleteDepartment()"
                            class="bg-red-400 text-white px-4 py-3 rounded-xl font-medium hover:bg-red-500">üóëÔ∏è</button><button
                            type="button" onclick="updateDepartmentFull()"
                            class="flex-1 bg-orange-600 text-white py-3 rounded-xl font-medium hover:bg-orange-700">üíæ
                            Save All</button></div>
                </div>
            </div>
        </div>
        <!-- Edit Employee Modal -->
        <div id="editEmployeeModal"
            class="hidden fixed inset-0 bg-black/50 flex items-start justify-center p-4 z-[60] pt-20">
            <div class="bg-white rounded-2xl max-w-md w-full">
                <div class="bg-orange-600 text-white p-4 rounded-t-2xl flex justify-between items-center">
                    <h3 class="font-bold text-lg">‚úèÔ∏è Edit Employee Details</h3>
                    <button type="button" onclick="closeModal('editEmployeeModal')"
                        class="text-2xl hover:bg-white/20 w-8 h-8 rounded-full">√ó</button>
                </div>
                <div class="p-6 space-y-4">
                    <input type="hidden" id="editEmpOldId">
                    <div class="bg-yellow-50 border border-yellow-300 rounded-xl p-3 text-sm text-yellow-800">
                        ‚ö†Ô∏è <strong>Warning:</strong> ID change karne par login details badal
                        jayengi!
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-1 text-slate-600">Employee Name
                            *</label>
                        <input type="text" id="editEmpName" placeholder="Enter Full Name"
                            class="w-full border-2 rounded-xl px-4 py-3 focus:border-orange-500 outline-none transition-all">
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-1 text-slate-600">Employee ID
                            *</label>
                        <input type="text" id="editEmpNewId" placeholder="e.g., HON-E001"
                            class="w-full border-2 rounded-xl px-4 py-3 font-mono focus:border-orange-500 outline-none transition-all">
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-1 text-slate-600">New Password
                            (Leave blank
                            for no change)</label>
                        <input type="password" id="editEmpPass" placeholder="Enter new password"
                            class="w-full border-2 rounded-xl px-4 py-3 focus:border-orange-500 outline-none transition-all">
                    </div>
                    <div class="flex gap-3 pt-2">
                        <button type="button" onclick="closeModal('editEmployeeModal')"
                            class="flex-1 bg-gray-100 text-gray-700 py-3 rounded-xl font-bold hover:bg-gray-200 transition-all">Cancel</button>
                        <button type="button" onclick="saveEmployeeChanges()"
                            class="flex-1 bg-orange-600 text-white py-3 rounded-xl font-bold hover:bg-orange-700 shadow-lg shadow-orange-200 transition-all">üíæ
                            Save
                            Changes</button>
                    </div>
                </div>
            </div>
        </div>
        <!-- Employee Profile Modal -->
        <div id="employeeProfileModal"
            class="hidden fixed inset-0 bg-black/50 flex items-start justify-center p-4 z-50 pt-10">
            <div class="bg-white rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto">
                <div class="sticky top-0 bg-indigo-600 text-white p-4 rounded-t-2xl flex justify-between items-center">
                    <h3 class="font-bold text-lg">üë§ Employee
                        Profile</h3><button type="button" onclick="closeModal('employeeProfileModal')"
                        class="text-2xl hover:bg-white/20 w-8 h-8 rounded-full">√ó</button>
                </div>
                <div id="employeeProfileContent" class="p-6"></div>
            </div>
        </div>
        <!-- Order Detail Modal with Map -->
        <div id="orderDetailModal" class="hidden fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50">
            <div class="bg-white rounded-2xl max-w-5xl w-full max-h-[90vh] overflow-y-auto relative">
                <div id="orderDetailContent" class="p-0">
                    <!-- Content will be populated by viewOrder() function -->
                </div>
            </div>
        </div>
    </div>
    </div>


    <!-- District Explorer Modal (From Backup) -->
    <div id="districtExplorerModal"
        class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
        <div class="bg-white rounded-2xl shadow-2xl max-w-4xl w-full"
            style="max-height: 90vh; display: flex; flex-direction: column;">
            <div
                class="bg-gradient-to-r from-blue-600 to-purple-600 p-4 flex justify-between items-center flex-shrink-0">
                <h3 class="text-xl font-bold text-white" id="districtExplorerTitle">üìç District Explorer
                </h3>
                <button type="button" onclick="closeModal('districtExplorerModal')"
                    class="text-white text-2xl">√ó</button>
            </div>
            <div class="p-6 overflow-y-auto flex-1" style="min-height: 0;">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div class="bg-blue-50 p-4 rounded-xl">
                        <h4 class="font-bold mb-3">üèõÔ∏è Talukas</h4>
                        <div id="talukasList" class="space-y-2 overflow-y-auto" style="max-height: 60vh;"></div>
                    </div>
                    <div class="bg-purple-50 p-4 rounded-xl">
                        <h4 class="font-bold mb-3">üìÆ Post Offices</h4>
                        <div id="postOfficesList" class="space-y-2 overflow-y-auto" style="max-height: 60vh;">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- DISTRICT EXPLORER MODAL -->
    <div id="districtExplorerModal"
        class="hidden fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50">
        <div
            class="bg-white w-full max-w-4xl max-h-[90vh] rounded-2xl shadow-2xl flex flex-col animate-scaleIn overflow-hidden">
            <!-- Header -->
            <div
                class="bg-gradient-to-r from-blue-600 to-indigo-600 p-6 flex justify-between items-center text-white shrink-0">
                <div>
                    <h3 class="text-2xl font-bold flex items-center gap-2">
                        <span>üó∫Ô∏è</span>
                        <span id="districtExplorerTitle">District Explorer</span>
                    </h3>
                    <p class="text-blue-100 text-sm mt-1">Select a Taluka (Block) to see Post Offices
                    </p>
                </div>
                <button onclick="closeModal('districtExplorerModal')"
                    class="bg-white/20 hover:bg-white/30 text-white rounded-full p-2 transition-colors">
                    ‚úï
                </button>
            </div>

            <!-- Body -->
            <div class="flex-1 overflow-hidden flex flex-col md:flex-row">
                <!-- Left: Talukas -->
                <div class="md:w-1/3 bg-gray-50 border-r border-gray-200 flex flex-col">
                    <div class="p-4 bg-gray-100 border-b font-bold text-gray-700 flex justify-between">
                        <span>üèõÔ∏è Taluka / Block</span>
                        <span class="text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full"
                            id="talukaCountBadge">0</span>
                    </div>
                    <div id="talukasList" class="flex-1 overflow-y-auto p-2 space-y-2">
                        <!-- Taluka items will be injected here -->
                        <div class="p-4 text-center text-gray-500">Loading...</div>
                    </div>
                </div>

                <!-- Right: Post Offices -->
                <div class="md:w-2/3 flex flex-col bg-white">
                    <div
                        class="p-4 bg-white border-b font-bold text-gray-700 flex justify-between items-center shadow-sm z-10">
                        <span>üìÆ Post Offices</span>
                        <input type="text" placeholder="üîç Filter Offices..."
                            class="border rounded-lg px-3 py-1 text-sm focus:ring-2 focus:ring-blue-500 outline-none"
                            oninput="filterExplorerOffices(this.value)">
                    </div>
                    <div id="postOfficesList"
                        class="flex-1 overflow-y-auto p-4 grid grid-cols-1 md:grid-cols-2 gap-3 content-start">
                        <!-- Post Office items will be injected here -->
                        <div class="col-span-full text-center text-gray-400 py-10">
                            üëà Select a Taluka from the left to view Post Offices
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
             ‚ïë  üìú SCRIPTS (Lines 2212-2214)                                                        ‚ïë
             ‚ï†‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï£
             ‚ïë  Contains: Main app.js, WhatsApp notifications, Auto tracking                     ‚ïë
             ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù -->
    <script src="app.js?v=20251227_modal_working"></script>
    <script src="whatsapp-notifications.js?v=2025123"></script>
    <script src="auto-tracking.js?v=2025123"></script>

    <!-- ‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
             ‚ïë  ‚úèÔ∏è EDIT ORDER MODAL (Lines 2217-2395)                                               ‚ïë
             ‚ï†‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï£
             ‚ïë  Contains: Order edit form with customer, address, payment sections               ‚ïë
             ‚ïë  Functions: openEditOrderModal(), submitEditOrder(), calculateEditCOD()           ‚ïë
             ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù -->
    <div id="editOrderModal"
        class="fixed inset-0 bg-black/60 backdrop-blur-sm z-50 hidden flex items-center justify-center overflow-y-auto py-10">
        <div
            class="bg-white rounded-3xl shadow-2xl w-full max-w-2xl mx-4 transform transition-all scale-100 flex flex-col max-h-[90vh]">
            <!-- Header -->
            <div class="p-6 border-b border-gray-100 flex justify-between items-center bg-gray-50/50 rounded-t-3xl">
                <div class="flex items-center gap-3">
                    <div
                        class="w-10 h-10 bg-indigo-100 rounded-xl flex items-center justify-center text-indigo-600 text-xl shadow-sm">
                        ‚úèÔ∏è
                    </div>
                    <div>
                        <h3 class="text-xl font-black text-gray-800 tracking-tight">Edit Order</h3>
                        <p class="text-xs font-bold text-gray-400 uppercase tracking-wider" id="editOrderSubtitle">
                            Updating Order Details</p>
                    </div>
                </div>
                <button onclick="closeModal('editOrderModal')"
                    class="text-gray-400 hover:text-red-500 transition-colors p-2 hover:bg-red-50 rounded-lg">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12">
                        </path>
                    </svg>
                </button>
            </div>

            <!-- Scrollable Content -->
            <div class="p-8 overflow-y-auto custom-scrollbar space-y-6">
                <input type="hidden" id="editOrderId">

                <!-- Customer Details Section -->
                <div class="bg-blue-50/50 p-5 rounded-2xl border border-blue-100/50">
                    <h4 class="text-xs font-black text-blue-800 uppercase tracking-widest mb-4 flex items-center gap-2">
                        üë§ Customer Information
                    </h4>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label
                                class="block text-xs font-bold text-gray-500 uppercase tracking-wider mb-1.5">Customer
                                Name</label>
                            <input type="text" id="editCustomerName"
                                class="w-full bg-white border-2 border-gray-200 rounded-xl px-4 py-2.5 text-gray-800 font-bold focus:border-blue-500 focus:ring-4 focus:ring-blue-500/10 outline-none transition-all">
                        </div>
                        <div>
                            <label class="block text-xs font-bold text-gray-500 uppercase tracking-wider mb-1.5">Mobile
                                Number</label>
                            <input type="text" id="editMobile"
                                class="w-full bg-white border-2 border-gray-200 rounded-xl px-4 py-2.5 text-gray-800 font-mono font-bold focus:border-blue-500 focus:ring-4 focus:ring-blue-500/10 outline-none transition-all">
                        </div>
                        <div>
                            <label
                                class="block text-xs font-bold text-gray-500 uppercase tracking-wider mb-1.5">Alternate
                                Number</label>
                            <input type="text" id="editAltMobile"
                                class="w-full bg-white border-2 border-gray-200 rounded-xl px-4 py-2.5 text-gray-800 font-mono font-bold focus:border-blue-500 focus:ring-4 focus:ring-blue-500/10 outline-none transition-all">
                        </div>
                        <div>
                            <label class="block text-xs font-bold text-gray-500 uppercase tracking-wider mb-1.5">Order
                                Type</label>
                            <select id="editOrderType"
                                class="w-full bg-white border-2 border-gray-200 rounded-xl px-4 py-2.5 text-gray-800 font-bold focus:border-blue-500 focus:ring-4 focus:ring-blue-500/10 outline-none transition-all appearance-none cursor-pointer">
                                <option value="Fresh">üÜï Fresh Order</option>
                                <option value="Reorder">üîÑ Reorder</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Address Section -->
                <div class="bg-orange-50/50 p-5 rounded-2xl border border-orange-100/50">
                    <h4
                        class="text-xs font-black text-orange-800 uppercase tracking-widest mb-4 flex items-center gap-2">
                        üìç Delivery Address
                    </h4>
                    <div class="space-y-4">
                        <div>
                            <label class="block text-xs font-bold text-gray-500 uppercase tracking-wider mb-1.5">Full
                                Address</label>
                            <textarea id="editAddress" rows="2"
                                class="w-full bg-white border-2 border-gray-200 rounded-xl px-4 py-2.5 text-gray-800 font-bold focus:border-orange-500 focus:ring-4 focus:ring-orange-500/10 outline-none transition-all resize-none"></textarea>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label
                                    class="block text-xs font-bold text-gray-500 uppercase tracking-wider mb-1.5">Landmark</label>
                                <input type="text" id="editLandmark"
                                    class="w-full bg-white border-2 border-gray-200 rounded-xl px-4 py-2.5 text-gray-800 font-bold focus:border-orange-500 focus:ring-4 focus:ring-orange-500/10 outline-none transition-all">
                            </div>
                            <div>
                                <label
                                    class="block text-xs font-bold text-gray-500 uppercase tracking-wider mb-1.5">City
                                    / District</label>
                                <input type="text" id="editCity"
                                    class="w-full bg-white border-2 border-gray-200 rounded-xl px-4 py-2.5 text-gray-800 font-bold focus:border-orange-500 focus:ring-4 focus:ring-orange-500/10 outline-none transition-all">
                            </div>
                            <div>
                                <label
                                    class="block text-xs font-bold text-gray-500 uppercase tracking-wider mb-1.5">State</label>
                                <input type="text" id="editState"
                                    class="w-full bg-white border-2 border-gray-200 rounded-xl px-4 py-2.5 text-gray-800 font-bold focus:border-orange-500 focus:ring-4 focus:ring-orange-500/10 outline-none transition-all">
                            </div>
                            <div>
                                <label class="block text-xs font-bold text-gray-500 uppercase tracking-wider mb-1.5">PIN
                                    Code</label>
                                <input type="text" id="editPin"
                                    class="w-full bg-white border-2 border-gray-200 rounded-xl px-4 py-2.5 text-gray-800 font-mono font-bold focus:border-orange-500 focus:ring-4 focus:ring-orange-500/10 outline-none transition-all">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Financials Section -->
                <div class="bg-emerald-50/50 p-5 rounded-2xl border border-emerald-100/50">
                    <h4
                        class="text-xs font-black text-emerald-800 uppercase tracking-widest mb-4 flex items-center gap-2">
                        üí∞ Payment Details
                    </h4>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div>
                            <label class="block text-xs font-bold text-gray-500 uppercase tracking-wider mb-1.5">Total
                                Amount (‚Çπ)</label>
                            <input type="number" id="editTotal"
                                class="w-full bg-white border-2 border-gray-200 rounded-xl px-4 py-2.5 text-gray-800 font-black focus:border-emerald-500 focus:ring-4 focus:ring-emerald-500/10 outline-none transition-all"
                                oninput="calculateEditCOD()">
                        </div>
                        <div>
                            <label class="block text-xs font-bold text-gray-500 uppercase tracking-wider mb-1.5">Advance
                                (‚Çπ)</label>
                            <input type="number" id="editAdvance"
                                class="w-full bg-white border-2 border-gray-200 rounded-xl px-4 py-2.5 text-gray-800 font-bold focus:border-emerald-500 focus:ring-4 focus:ring-emerald-500/10 outline-none transition-all"
                                oninput="calculateEditCOD()">
                        </div>
                        <div>
                            <label class="block text-xs font-bold text-red-500 uppercase tracking-wider mb-1.5">COD
                                Amount (‚Çπ)</label>
                            <input type="number" id="editCod" readonly
                                class="w-full bg-red-50 border-2 border-red-100 rounded-xl px-4 py-2.5 text-red-600 font-black outline-none cursor-not-allowed">
                        </div>
                    </div>
                </div>

                <!-- Status Section -->
                <div class="bg-gray-50 p-5 rounded-2xl border border-gray-200">
                    <label class="block text-xs font-bold text-gray-500 uppercase tracking-wider mb-1.5">Order
                        Status</label>
                    <select id="editStatus"
                        class="w-full bg-white border-2 border-gray-200 rounded-xl px-4 py-2.5 text-gray-800 font-bold focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 outline-none transition-all cursor-pointer">
                        <option value="Pending">üïí Pending</option>
                        <option value="Address Verified">‚úÖ Address Verified</option>
                        <option value="Dispatched">üì¶ Dispatched</option>
                        <option value="Delivered">üéâ Delivered</option>
                        <option value="Cancelled">‚ùå Cancelled</option>
                        <option value="On Hold">‚è∏Ô∏è On Hold</option>
                    </select>
                    <p class="text-[10px] text-gray-400 mt-2 font-medium">‚ö†Ô∏è Changing status manually may bypass
                        standard verification checks.</p>
                </div>

            </div>

            <!-- Footer -->
            <div class="p-6 border-t border-gray-100 bg-gray-50/50 rounded-b-3xl flex justify-end gap-3">
                <button onclick="closeModal('editOrderModal')"
                    class="px-6 py-3 rounded-xl font-bold text-gray-500 hover:bg-gray-100 transition-all border border-transparent hover:border-gray-200">
                    Cancel
                </button>
                <button onclick="submitEditOrder()"
                    class="px-8 py-3 rounded-xl font-bold text-white bg-indigo-600 hover:bg-indigo-700 shadow-lg shadow-indigo-200 hover:scale-105 transition-all flex items-center gap-2">
                    <span>üíæ</span> Save Changes
                </button>
            </div>
        </div>
    </div>

    <!-- TRACKING MODAL - NEW CLEAN DESIGN -->
    <div id="trackingModal"
        class="hidden fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center p-4 z-[100]">
        <div
            class="bg-white rounded-2xl max-w-4xl w-full shadow-2xl animate-fadeIn overflow-hidden flex flex-col max-h-[90vh]">

            <!-- Header - Dynamic Color Based on Status -->
            <div id="trackingHeader"
                class="bg-gradient-to-r from-blue-600 to-indigo-600 p-5 flex justify-between items-center">
                <div class="flex items-center gap-4">
                    <div id="trackingStatusIcon"
                        class="w-14 h-14 bg-white/20 backdrop-blur rounded-xl flex items-center justify-center text-3xl">
                        üì¶
                    </div>
                    <div>
                        <p id="trackingOrderId" class="text-white/80 text-sm font-medium"></p>
                        <h2 id="trackingStatusText" class="text-white font-black text-2xl">Loading...</h2>
                        <p id="trackingLastUpdate" class="text-white/60 text-xs mt-1"></p>
                    </div>
                </div>
                <button onclick="document.getElementById('trackingModal').classList.add('hidden')"
                    class="bg-white/20 hover:bg-white/30 w-10 h-10 rounded-lg flex items-center justify-center transition-all text-white text-xl font-bold">
                    &times;
                </button>
            </div>

            <!-- Quick Info Bar -->
            <div class="bg-slate-50 border-b border-slate-200 p-4">
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-center">
                    <div class="bg-white rounded-xl p-3 shadow-sm border border-slate-100">
                        <p class="text-[10px] text-slate-400 font-bold uppercase tracking-wide">AWB Number</p>
                        <p id="trackingAWB" class="font-mono font-black text-slate-800 text-sm mt-1">-</p>
                    </div>
                    <div class="bg-white rounded-xl p-3 shadow-sm border border-slate-100">
                        <p class="text-[10px] text-slate-400 font-bold uppercase tracking-wide">Courier</p>
                        <p id="trackingCourier" class="font-bold text-slate-800 text-sm mt-1">-</p>
                    </div>
                    <div class="bg-white rounded-xl p-3 shadow-sm border border-slate-100">
                        <p class="text-[10px] text-slate-400 font-bold uppercase tracking-wide">Current Location
                        </p>
                        <p id="trackingLocation" class="font-bold text-slate-800 text-sm mt-1 truncate">-</p>
                    </div>
                    <div class="bg-white rounded-xl p-3 shadow-sm border border-slate-100">
                        <p class="text-[10px] text-slate-400 font-bold uppercase tracking-wide">EDD</p>
                        <p id="trackingEDD" class="font-bold text-emerald-600 text-sm mt-1">-</p>
                    </div>
                </div>
            </div>

            <!-- Progress Stepper -->
            <div class="bg-white border-b border-slate-100 p-4">
                <div class="flex justify-between items-center max-w-md mx-auto relative">
                    <div class="absolute top-5 left-8 right-8 h-1 bg-slate-200 rounded-full"></div>
                    <div id="trackingProgressLine"
                        class="absolute top-5 left-8 h-1 bg-blue-500 rounded-full transition-all duration-1000"
                        style="width: 0%;"></div>

                    <div class="relative z-10 flex flex-col items-center">
                        <div id="stepIndicator1"
                            class="w-10 h-10 rounded-full bg-slate-200 flex items-center justify-center text-xl transition-all">
                            üì¶</div>
                        <span class="text-[9px] font-bold text-slate-400 mt-1 uppercase">Booked</span>
                    </div>
                    <div class="relative z-10 flex flex-col items-center">
                        <div id="stepIndicator2"
                            class="w-10 h-10 rounded-full bg-slate-200 flex items-center justify-center text-xl transition-all">
                            üöõ</div>
                        <span class="text-[9px] font-bold text-slate-400 mt-1 uppercase">Shipped</span>
                    </div>
                    <div class="relative z-10 flex flex-col items-center">
                        <div id="stepIndicator3"
                            class="w-10 h-10 rounded-full bg-slate-200 flex items-center justify-center text-xl transition-all">
                            üõµ</div>
                        <span class="text-[9px] font-bold text-slate-400 mt-1 uppercase">OFD</span>
                    </div>
                    <div class="relative z-10 flex flex-col items-center">
                        <div id="stepIndicator4"
                            class="w-10 h-10 rounded-full bg-slate-200 flex items-center justify-center text-xl transition-all">
                            ‚úÖ</div>
                        <span class="text-[9px] font-bold text-slate-400 mt-1 uppercase">Delivered</span>
                    </div>
                </div>
            </div>

            <!-- Main Content -->
            <div class="flex-1 overflow-hidden flex flex-col md:flex-row">

                <!-- Left: Details -->
                <div class="w-full md:w-72 bg-slate-50 p-4 border-r border-slate-200 overflow-y-auto shrink-0">
                    <h4 class="font-bold text-slate-700 text-sm uppercase tracking-wide mb-3">üìã Details</h4>

                    <div class="space-y-2">
                        <div class="bg-white rounded-lg p-3 border border-slate-100">
                            <p class="text-[9px] text-slate-400 font-bold uppercase mb-1">Route</p>
                            <div class="flex items-center gap-2 text-sm">
                                <span id="trackingOrigin" class="font-bold text-slate-700">-</span>
                                <span class="text-slate-300">‚Üí</span>
                                <span id="trackingDestination" class="font-bold text-slate-700">-</span>
                            </div>
                        </div>

                        <div class="grid grid-cols-2 gap-2">
                            <div class="bg-white rounded-lg p-2 border border-slate-100">
                                <p class="text-[9px] text-slate-400 font-bold uppercase">Weight</p>
                                <p id="trackingWeight" class="font-bold text-slate-700 text-sm">-</p>
                            </div>
                            <div class="bg-white rounded-lg p-2 border border-slate-100">
                                <p class="text-[9px] text-slate-400 font-bold uppercase">Pieces</p>
                                <p id="trackingPieces" class="font-bold text-slate-700 text-sm">-</p>
                            </div>
                        </div>

                        <div class="grid grid-cols-2 gap-2">
                            <div class="bg-white rounded-lg p-2 border border-slate-100">
                                <p class="text-[9px] text-slate-400 font-bold uppercase">Pickup</p>
                                <p id="trackingPickupDate" class="font-bold text-slate-700 text-sm">-</p>
                            </div>
                            <div class="bg-white rounded-lg p-2 border border-slate-100">
                                <p class="text-[9px] text-slate-400 font-bold uppercase">POD</p>
                                <p id="trackingPOD" class="font-bold text-slate-700 text-sm">-</p>
                            </div>
                        </div>
                    </div>

                    <a id="trackingExternalLink" href="#" target="_blank"
                        class="mt-4 block bg-blue-600 hover:bg-blue-700 text-white text-center font-bold py-3 rounded-lg transition-all text-sm">
                        üîó Track on Website
                    </a>
                </div>

                <!-- Right: Timeline -->
                <div class="flex-1 flex flex-col bg-white overflow-hidden">
                    <div class="p-3 border-b border-slate-100 flex justify-between items-center bg-slate-50">
                        <h4 class="font-bold text-slate-700 text-sm flex items-center gap-2">üìç History</h4>
                        <span id="trackingCount"
                            class="bg-blue-100 text-blue-700 text-xs px-3 py-1 rounded-full font-bold"></span>
                    </div>

                    <div id="trackingTimeline" class="p-4 overflow-y-auto flex-1">
                        <p class="text-center text-slate-400 py-8">Loading...</p>
                    </div>
                </div>
            </div>

            <div id="trackingHeroCard" class="hidden"></div>
        </div>
    </div>

    <!-- ========================================
         MODULAR JAVASCRIPT ARCHITECTURE
         ======================================== -->

    <!-- TEMPORARILY DISABLED - Conflicts with app.js -->
    <!-- Will re-enable after full migration from app.js monolith -->

    <!-- LAZY LOADER (Load First for Dynamic Loading) -->
    <!-- <script src="js/core/lazy-loader.js" defer></script> -->

    <!-- PAGINATION HELPER (Flexible Items Per Page) -->
    <!-- <script src="js/core/pagination-helper.js" defer></script> -->

    <!-- CORE MODULES (Load First) -->
    <!-- <script src="js/core/config.js" defer></script> -->
    <!-- <script src="js/core/session.js" defer></script> -->
    <!-- <script src="js/core/utils.js" defer></script> -->

    <!-- UI UTILITIES -->
    <!-- <script src="js/ui/messages.js" defer></script> -->
    <!-- <script src="js/ui/navigation.js" defer></script> -->
    <!-- <script src="js/ui/popups.js" defer></script> -->
    <script src="js/ui/modals.js" defer></script>
    <!-- <script src="js/ui/screen-manager.js" defer></script> -->

    <!-- CARD RENDERERS - NEEDED BY APP.JS -->
    <!-- CRITICAL: common.js MUST load FIRST so viewOrder is available -->
    <script src="js/common.js"></script>
    <script src="js/cards/verification-card.js"></script>
    <script src="js/cards/dispatch-card.js"></script>
    <script src="js/cards/delivery-card.js"></script>

    <!-- AUTHENTICATION -->
    <!-- <script src="js/auth/login.js" defer></script> -->

    <!-- WHATSAPP FEATURES -->
    <!-- <script src="js/features/whatsapp/templates.js" defer></script> -->

    <!-- Global Search -->
    <script src="js/global-search.js" defer></script>


    <!-- Department Search -->
    <script src="js/department-search.js" defer></script>

    <!-- Admin Search -->
    <script src="js/admin-search.js" defer></script>

    <!-- UI Navigation -->
    <script src="js/ui/navigation.js" defer></script>

    <!-- Employee Panel -->
    <script src="js/panels/employee.js" defer></script>

    <!-- MAIN APPLICATION (Monolith - Will gradually phase out) -->
    <script src="js/admin.js" defer></script>
    <script src="app.js?v=3.11" defer></script>

    <!-- EXISTING STANDALONE MODULES -->
    <!-- Temporarily disabled - causing 404 errors -->
    <!-- <script src="analytics-dashboard.js" defer></script> -->
    <!-- <script src="employee-performance.js" defer></script> -->
    <!-- <script src="auto-tracking.js" defer></script> -->
    <!-- <script src="order-notifications.js" defer></script> -->
    <!-- <script src="whatsapp-notifications.js" defer></script> -->

    <!-- APPLICATION INIT (Load Last) -->
    <script src="js/init.js" defer></script>

    <!-- CRITICAL: Common.js loads LAST to ensure viewOrder is available -->
    <script src="js/common.js"></script>

</body>

</html>